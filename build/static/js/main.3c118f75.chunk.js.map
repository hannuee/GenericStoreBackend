{"version":3,"sources":["reducers/notificationReducer.js","components/Menu.js","utils/CategoryTreeProcessors.js","assistingComponents/BreadcrumbsLinks.js","services/categories.js","services/products.js","assistingComponents/CategoryUpdateForm.js","components/CategoryAdditionForm.js","utils/Money.js","assistingComponents/AddToShoppingCartForm.js","assistingComponents/AvailabilityUpdateSwitch.js","assistingComponents/PricesAndSizesForm.js","assistingComponents/ProductCard.js","assistingComponents/CategoryHeader.js","components/CategoryPage.js","services/orders.js","reducers/orderReducer.js","assistingComponents/OrderElement.js","components/MyOrdersPage.js","components/MyCartPage.js","components/AdminOrdersPage.js","services/customers.js","reducers/customerReducer.js","components/CustomersPage.js","reducers/productReducer.js","components/LoginPage.js","components/RegisterPage.js","assistingComponents/Notification.js","components/MainStructure.js","reducers/categoryReducer.js","App.js","store.js","index.js"],"names":["initialState","text","severity","timeoutID","displayNotificationForSeconds","seconds","dispatch","a","setTimeout","type","data","reducer","state","action","clearTimeout","noDeco","textDecoration","color","useStyles","makeStyles","theme","listItem","paddingTop","paddingBottom","toolbar","mixins","Menu","classes","categories","useSelector","loggedIn","customers","useDispatch","history","useHistory","handleLogout","window","localStorage","removeItem","push","className","List","filter","category","category_id","map","to","id","style","ListItem","button","ListItemIcon","ListItemText","primary","name","undefined","admin","AdminAddCategoryButton","Divider","CustomerButtons","AdminButtons","onClick","getAsListOfIdsAndPaths","categoriesTree","buildTree","getNodeCategoryIdsAndPaths","getIdsAndNamesOnPathToId","idToFind","getIdsAndNamesOnPath","categoriesMap","Map","has","categoryList","get","set","root","nodeCategory","recursiveChildrenAdder","node","childNodes","childNode","childToAdd","nodesAndPaths","recursiveNodePathPrinter","path","pathContinued","child","recursivePathFinder","idsAndNodesOnAPath","newIdsAndNodesOnAPath","possibleAnswer","crumbs","marginRight","spacing","links","BreadcrumbsLinks","categoryId","Breadcrumbs","separator","fontSize","idAndName","baseUrl","getAll","axios","response","post","newCategory","adminToken","headers","authorization","deleteCategory","delete","putNewCategory","idAndInfoToModify","put","getAvailable","newProduct","putAvailable","putPricesAndSizes","useStylesSizeSelect","formControl","margin","minWidth","horizontalLayoutLeft","display","flexDirection","alignItems","width","marginPlease","select","CategoryUpdateForm","productId","classesSizeSelect","React","useState","categorySelected","setCategorySelected","handleCategoryChange","event","target","value","handleCategoryUpdate","categoryService","parentCategoryId","token","productService","productModified","FormControl","variant","InputLabel","Select","labelId","onChange","label","item","MenuItem","Button","startIcon","CategoryAdditionForm","parentCategoryIdForNewCategory","handleCloseNewCategoryForm","setName","description","setDescription","disabled","setDisabled","handleAddNewCategory","Paper","noValidate","autoComplete","TextField","required","size","closeFormButtonOrNothing","eurosToFormattedEuros","Intl","NumberFormat","currency","minimumFractionDigits","maximumFractionDigits","eurosToFormattedEurosWithoutE","centsToFormattedEuros","cents","format","userInputPriceToCleanedEuros","userInput","Number","replace","toFixed","marginLeft","formControlQuantity","selectEmpty","marginTop","horizontalUpperLayout","float","horizontalLayoutRight","typographyStylePrice","fontWeight","AddToShoppingCartForm","product","pricesandsizes","priceAndSize","setPriceAndSize","quantity","setQuantity","handleQuantityChange","quantityInput","Math","round","handleAddToCart","product_time","Date","getTime","product_name","product_id","priceAndSizeOption","price","htmlFor","OutlinedInput","Typography","component","AvailabilityUpdateSwitch","available","setAvailable","handleAvailabilityChangeAndUpdate","addedProduct","Switch","checked","inputProps","useStylesNewCard","horizontalLayout","verticalLayout","PricesAndSizesForm","initState","pricesAndSizesParent","setPricesAndSizesParent","classesNewCard","transformedPricesAndSizes","pAndS","pricesAndSizes","setPricesAndSizes","pricesAndSizesOwn","setPricesAndSizesOwn","handlePriceAndSizeChange","indexModified","sizeOrPrice","newArray","forEach","index","handlePriceAndSizeUpdate","newPricesAndSizes","cleanedEuros","isNaN","trunc","modifiedProduct","InputLabelProps","shrink","IconButton","indexDeleted","showSendUpdateButtonIfUpdateMode","concat","switchAndCategoryModStyle","floatLeft","floatRight","content","flex","padding","paddingLeft","nameLine","marginBottom","cover","expand","transform","transition","transitions","create","duration","shortest","expandOpen","ProductCard","parentCategoryIdForNewProduct","handleCloseNewProductForm","expanded","setExpanded","handleNameChange","handleDescriptionChange","handleExpandClick","handleAddNewProduct","asNumber","Card","picture","CardMedia","image","URL","title","desc","CardContent","VisibilityInfoOrNothing","clsx","EditButtonOrNothing","multiline","rows","Collapse","in","timeout","unmountOnExit","orientation","flexItem","adminControlsOrNothing","CategoryHeader","props","categoryDisplayed","find","subCategories","products","showNewProductForm","setShowNewProductForm","showNewCategoryForm","setShowNewCategoryForm","expandedCategoryModificationControls","setExpandedCategoryModificationControls","handleShowNewProductForm","handleShowNewCategoryForm","handleExpandCategoryModificationControls","handleDeleteCategory","AdminExpandCategoryModificationControlsButton","AdminNewProductAndCategoryButtons","length","chipStyle","CategoryPage","Chip","clickable","getOfCustomerWithDetails","customerToken","order","getOneWithDetails","getUndispatchedWithDetails","getDispatched","putInternalNotes","putOrderDispatched","initializeCustomersOrdersWithDetails","orderService","orders","cart","adminsUndispatched","adminsDispatched","newAdmins","orderDetails","address","mobile","email","newUndispatched","newDispatched","ordersImmuted","ordersImmuted2","newCart","setItem","JSON","stringify","orderItem","heading","typography","pxToRem","secondaryHeading","palette","secondary","icon","verticalAlign","height","details","background","column","flexBasis","helper","useStylesTable","table","OrderElement","classesTable","user","internalNoteFieldInit","internalnotes","internalNoteField","setInternalNoteField","handleInternalNotesChange","handleInternalNotesSubmission","orderdispatched","internalNotes","modifiedOrder","handleMarkAsDispatched","Accordion","AccordionSummary","expandIcon","orderreceived","toLocaleDateString","purchaseprice","AccordionDetails","TableContainer","Table","TableHead","TableRow","TableCell","align","TableBody","orderDetail","scope","priceandsize","orderDetailsDisplay","adminControls","adminMarkAsDispatched","customerinstructions","customer_id","adminDetails","MyOrdersPage","customer","useEffect","cartItems","handleOrderSending","overallPriceInCents","cartItem","AdminOrdersPage","ordersDispatched","showDispatched","setShowDispatched","gutterBottom","dispatchedOrdersDisplay","customerInfo","postLogin","credentials","adminsCustomers","customersImmuted","borderLeft","divider","CustomersPage","customerService","handleExpansion","isExpanded","getDetailsForCustomer","customerDetailsDisplay","initializeAllProducts","LoginPage","setEmail","password","setPassword","handleLogIn","tokenAndInfo","error","includes","RegisterPage","setAddress","setMobile","handleAddNewCustomer","Alert","elevation","Notification","notification","Snackbar","anchorOrigin","vertical","horizontal","open","customStyleColor","boxShadow","drawer","breakpoints","up","flexShrink","appBar","zIndex","menuButton","drawerPaper","backgroundColor","border","flexGrow","MainStructure","windowForMUI","container","document","body","useTheme","mobileOpen","setMobileOpen","handleDrawerToggle","idInMatchObject","useRouteMatch","idExtracted","params","firstMainCategory","CssBaseline","AppBar","position","Toolbar","edge","noWrap","Hidden","smUp","implementation","Drawer","anchor","direction","onClose","paper","ModalProps","keepMounted","xsDown","MyCartPage","initializeCategories","cetegory","App","loggedUserJSON","getItem","parse","cartJSON","combineReducers","categoryReducer","productReducer","orderReducer","customerReducer","notificationReducer","store","createStore","applyMiddleware","thunk","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.3c118f75.chunk.js","sourcesContent":["const initialState = {\n  text: '',\n  severity: '',   // success, info, warning, error\n  timeoutID: null\n}\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n  case 'CHANGE':\n    if (state.timeoutID !== null) clearTimeout(state.timeoutID)\n    return action.data\n  case 'CLEAR':\n    return { text: '', severity: '', timeoutID: null }\n  default: return state\n  }\n}\n\nexport const displayNotificationForSeconds = (text, severity, seconds) => {\n  return async dispatch => {\n    const timeoutID = setTimeout(() => {dispatch({ type: 'CLEAR' })}, seconds*1000)\n    dispatch({\n      type: 'CHANGE',\n      data: { text, severity, timeoutID }\n    })\n  }\n}\n\nexport default reducer","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport { useDispatch } from 'react-redux'\nimport { Link } from 'react-router-dom'\nimport { useHistory } from 'react-router-dom'\nimport { displayNotificationForSeconds } from '../reducers/notificationReducer'\n\n// Material UI:\nimport { makeStyles } from '@material-ui/core/styles'\nimport Divider from '@material-ui/core/Divider'\nimport InboxIcon from '@material-ui/icons/MoveToInbox'\nimport List from '@material-ui/core/List'\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport AccountBoxIcon from '@material-ui/icons/AccountBox'\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp'\nimport GroupIcon from '@material-ui/icons/Group'\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart'\nimport AddIcon from '@material-ui/icons/Add'\nimport StorefrontIcon from '@material-ui/icons/Storefront'\n\nconst noDeco = {  // Linkeille\n  textDecoration: 'none',\n  color: '#6f6f6f'\n}\n\nconst useStyles = makeStyles((theme) => ({\n  listItem: {\n    paddingTop: '3px',\n    paddingBottom: '3px',\n  },\n  // necessary for content to be below app bar\n  toolbar: theme.mixins.toolbar,\n}))\n\nconst Menu = () => {\n  const classes = useStyles()\n\n  const categories = useSelector(state => state.categories)\n  const loggedIn = useSelector(state => state.customers.loggedIn)\n  const dispatch = useDispatch()\n  const history = useHistory()\n\n  const handleLogout = () => {\n    window.localStorage.removeItem('genericStoreUser')\n    dispatch({\n      type: 'ADD_LOGGED_IN',\n      data: null\n    })\n    history.push('/')\n    dispatch(displayNotificationForSeconds('Kirjauduttu ulos', 'success', 5))\n  }\n\n\n  // SUBCOMPONENTS:\n\n  const AdminAddCategoryButton = () => {\n    if (loggedIn != null && loggedIn.admin != undefined) {\n      return (\n        <Link to=\"/uusikategoria\" style={noDeco}>\n          <ListItem button className={classes.listItem}>\n            <ListItemIcon> <AddIcon /> </ListItemIcon>\n            <ListItemText primary=\"Lisää pääkategoria\" />\n          </ListItem>\n        </Link>\n      )\n    }\n  }\n\n  const CustomerButtons = () => {\n    if (loggedIn != null && loggedIn.name != undefined) {\n      return (\n        <>\n          <Link to=\"/omattilaukset\" style={noDeco}>\n            <ListItem button className={classes.listItem}>\n              <ListItemIcon> <InboxIcon /> </ListItemIcon>\n              <ListItemText primary=\"Omat tilaukset\" />\n            </ListItem>\n          </Link>\n          <Link to=\"/ostoskori\" style={noDeco}>\n            <ListItem button className={classes.listItem}>\n              <ListItemIcon> <ShoppingCartIcon /> </ListItemIcon>\n              <ListItemText primary=\"Ostoskori\" />\n            </ListItem>\n          </Link>\n        </>\n      )\n    }\n  }\n\n  const AdminButtons = () => {\n    if (loggedIn != null && loggedIn.admin != undefined) {\n      return (\n        <>\n          <Link to=\"/tilaukset\" style={noDeco}>\n            <ListItem button className={classes.listItem}>\n              <ListItemIcon> <InboxIcon /> </ListItemIcon>\n              <ListItemText primary=\"Tilaukset\" />\n            </ListItem>\n          </Link>\n          <Link to=\"/asiakkaat\" style={noDeco}>\n            <ListItem button className={classes.listItem}>\n              <ListItemIcon> <GroupIcon /> </ListItemIcon>\n              <ListItemText primary=\"Asiakkaat\" />\n            </ListItem>\n          </Link>\n        </>\n      )\n    }\n  }\n\n  const LogInOrLogOutButton = () => {\n    if (loggedIn == null) {\n      return (\n        <Link to=\"/kirjautuminen\" style={noDeco}>\n          <ListItem button className={classes.listItem}>\n            <ListItemIcon> <AccountBoxIcon /> </ListItemIcon>\n            <ListItemText primary=\"Kirjaudu\" />\n          </ListItem>\n        </Link>\n      )\n    } else {\n      return (\n        <ListItem button className={classes.listItem} onClick={handleLogout} style={noDeco}>\n          <ListItemIcon> <ExitToAppIcon /> </ListItemIcon>\n          <ListItemText primary=\"Kirjaudu ulos\" />\n        </ListItem>\n      )\n    }\n  }\n\n\n  // MAIN COMPONENT:\n\n  return (\n    <div>\n      <div className={classes.toolbar} />\n\n      <List>\n        {categories.filter(category => category.category_id === null).map(category =>\n          <Link to={`/kategoriat/${category.id}`} style={noDeco} key={category.id}>\n            <ListItem button className={classes.listItem}>\n              <ListItemIcon> <StorefrontIcon /> </ListItemIcon>\n              <ListItemText primary={category.name} />\n            </ListItem>\n          </Link>\n        )}\n        {AdminAddCategoryButton()}\n      </List>\n\n      <Divider />\n\n      <List>\n        {CustomerButtons()}\n        {AdminButtons()}\n        {LogInOrLogOutButton()}\n      </List>\n    </div>\n  )\n}\n\nexport default Menu\n","export const getAsListOfIdsAndPaths = (categories) => {\n  const categoriesTree = buildTree(categories)\n  const listOfCategoryIdsAndPaths = getNodeCategoryIdsAndPaths(categoriesTree)\n  return listOfCategoryIdsAndPaths\n}\n\nexport const getIdsAndNamesOnPathToId = (categories, idToFind) => {\n  const categoriesTree = buildTree(categories)\n  const idsAndNamesOnPath = getIdsAndNamesOnPath(categoriesTree, idToFind)\n  return idsAndNamesOnPath\n}\n\n\n// Helpers:\n\nconst buildTree = (categories) => {\n  const categoriesMap = new Map()\n\n  // Group the categories to the map by parent category ID (aka: category_id):\n  for(let category of categories) {\n    if(!categoriesMap.has(category.category_id)) categoriesMap.set(category.category_id, [category])\n    else {\n      const categoryList = categoriesMap.get(category.category_id)\n      categoryList.push(category)\n      categoriesMap.set(category.category_id, categoryList)\n    }\n  }\n\n  // The Tree will be built to this object:\n  const root = {\n    nodeCategory: null\n  }\n\n  // Building The Tree:\n  recursiveChildrenAdder(root, categoriesMap)\n\n  return root\n}\n\nconst recursiveChildrenAdder = (node, categoriesMap) => {\n  // Find out the children of the node from the Map.\n  let childNodes\n  if(node.nodeCategory === null) childNodes = categoriesMap.get(null)  // root node\n  else childNodes = categoriesMap.get(node.nodeCategory.id)            // all the other nodes\n\n  if(childNodes === undefined) return  // end the recursion.\n\n  // Add the child nodes for the node.\n  for(let childNode of childNodes) {\n    const childToAdd = {\n      nodeCategory: childNode\n    }\n    node['child' + childNode.id] = childToAdd  // adds the child\n    recursiveChildrenAdder(childToAdd, categoriesMap)  // adds children for the newly added child\n  }\n}\n\n\nconst getNodeCategoryIdsAndPaths = (root) => {\n  const nodesAndPaths = []\n  const path = ''\n\n  recursiveNodePathPrinter(root, path, nodesAndPaths)\n\n  return nodesAndPaths\n}\n\nconst recursiveNodePathPrinter = (node, path, nodesAndPaths) => {\n  let pathContinued = path\n  if(node.nodeCategory !== null) {\n    if(path !== '') pathContinued += ' - '\n    pathContinued += node.nodeCategory.name\n    nodesAndPaths.push({ id: node.nodeCategory.id, path: pathContinued })\n  }\n\n  for(let child in node){\n    if(child !== 'nodeCategory') recursiveNodePathPrinter(node[child], pathContinued, nodesAndPaths)\n  }\n}\n\n\nconst getIdsAndNamesOnPath = (root, idToFind) => {\n  return recursivePathFinder(root, idToFind, [])\n}\n\nconst recursivePathFinder = (node, idToFind, idsAndNodesOnAPath) => {\n  let newIdsAndNodesOnAPath\n\n  if(node.nodeCategory !== null) {\n    newIdsAndNodesOnAPath = [...idsAndNodesOnAPath, { id: node.nodeCategory.id, name: node.nodeCategory.name }]\n    if(node.nodeCategory.id === idToFind) return newIdsAndNodesOnAPath\n  } else {\n    newIdsAndNodesOnAPath = idsAndNodesOnAPath\n  }\n\n  for(let child in node){\n    if(child !== 'nodeCategory') {\n      const possibleAnswer = recursivePathFinder(node[child], idToFind, newIdsAndNodesOnAPath)\n      if(possibleAnswer !== undefined) return possibleAnswer\n    }\n  }\n}\n","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport { Link } from 'react-router-dom'\nimport { getIdsAndNamesOnPathToId } from '../utils/CategoryTreeProcessors'\n\n// Material UI:\nimport { makeStyles } from '@material-ui/core/styles'\nimport Breadcrumbs from '@material-ui/core/Breadcrumbs'\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext'\n\nconst useStyles = makeStyles((theme) => ({\n  crumbs: {\n    marginRight: theme.spacing(3),\n  },\n  links: {\n    textDecoration: 'none',\n    color: '#6f6f6f'\n  },\n}))\n\nconst BreadcrumbsLinks = ({ categoryId }) => {\n  const classes = useStyles()\n\n  const categories = useSelector(state => state.categories)\n\n  return (\n    <Breadcrumbs separator={<NavigateNextIcon fontSize=\"small\" />} aria-label=\"breadcrumb\" className={classes.crumbs}>\n      {getIdsAndNamesOnPathToId(categories, categoryId).map(idAndName =>\n        <Link to={`/kategoriat/${idAndName.id}`} key={idAndName.id} className={classes.links}>\n          {idAndName.name}\n        </Link>\n      )}\n    </Breadcrumbs>\n  )\n}\n\nexport default BreadcrumbsLinks\n","import axios from 'axios'\n\nconst baseUrl = '/api/categories'\n\nconst getAll = async () => {\n  const response = await axios.get(baseUrl)\n  return response.data\n}\n\n// For admin:\n\nconst post = async (newCategory, adminToken) => {\n  const response = await axios.post(baseUrl, newCategory, { headers: { authorization: 'bearer ' + adminToken } })\n  return response.data\n}\n\nconst deleteCategory = async (id, adminToken) => {\n  const response = await axios.delete(baseUrl + '/' + id, { headers: { authorization: 'bearer ' + adminToken } })\n  return response.data\n}\n\nconst putNewCategory = async (idAndInfoToModify, adminToken) => {\n  const response = await axios.put(baseUrl + '/newCategory', idAndInfoToModify, { headers: { authorization: 'bearer ' + adminToken } })\n  return response.data\n}\n\nexport default { getAll, post, deleteCategory, putNewCategory }","import axios from 'axios'\n\nconst baseUrl = '/api/products'\n\nconst getAvailable = async () => {\n  const response = await axios.get(baseUrl + '/available')\n  return response.data\n}\n\n// For admin:\n\nconst getAll = async (adminToken) => {\n  const response = await axios.get(baseUrl, { headers: { authorization: 'bearer ' + adminToken } })\n  return response.data\n}\n\nconst post = async (newProduct, adminToken) => {\n  const response = await axios.post(baseUrl, newProduct, { headers: { authorization: 'bearer ' + adminToken } })\n  return response.data\n}\n\nconst putAvailable = async (idAndInfoToModify, adminToken) => {\n  const response = await axios.put(baseUrl + '/available', idAndInfoToModify, { headers: { authorization: 'bearer ' + adminToken } })\n  return response.data\n}\n\nconst putNewCategory = async (idAndInfoToModify, adminToken) => {\n  const response = await axios.put(baseUrl + '/newCategory', idAndInfoToModify, { headers: { authorization: 'bearer ' + adminToken } })\n  return response.data\n}\n\nconst putPricesAndSizes = async (idAndInfoToModify, adminToken) => {\n  const response = await axios.put(baseUrl + '/pricesAndSizes', idAndInfoToModify, { headers: { authorization: 'bearer ' + adminToken } })\n  return response.data\n}\n\nexport default { getAll, getAvailable, post, putAvailable, putNewCategory, putPricesAndSizes }","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport { useDispatch } from 'react-redux'\nimport { displayNotificationForSeconds } from '../reducers/notificationReducer'\nimport { getAsListOfIdsAndPaths } from '../utils/CategoryTreeProcessors'\nimport categoryService from '../services/categories'\nimport productService from '../services/products'\n\n// Material UI:\nimport { makeStyles } from '@material-ui/core/styles'\nimport SaveIcon from '@material-ui/icons/Save'\nimport Button from '@material-ui/core/Button'\nimport FormControl from '@material-ui/core/FormControl'\nimport Select from '@material-ui/core/Select'\nimport InputLabel from '@material-ui/core/InputLabel'\nimport MenuItem from '@material-ui/core/MenuItem'\n\nconst useStylesSizeSelect = makeStyles((theme) => ({\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120,\n  },\n  horizontalLayoutLeft: {\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'center',\n    width: '50%',\n  },\n  marginPlease: {\n    margin: theme.spacing(1),\n  },\n  select: {\n    margin: theme.spacing(1),\n    minWidth: 250\n  },\n}))\n\n// Give categoryId to update the parent category id of a category,\n// Give productId to update the parent category id of a product.\nconst CategoryUpdateForm = ({ categoryId, productId }) => {\n  const classesSizeSelect = useStylesSizeSelect()\n\n  const categories = useSelector(state => state.categories)\n  const loggedIn = useSelector(state => state.customers.loggedIn)\n  const dispatch = useDispatch()\n\n  const [categorySelected, setCategorySelected] = React.useState('')\n\n  const handleCategoryChange = (event) => {\n    setCategorySelected(event.target.value)\n  }\n\n  const handleCategoryUpdate = async () => {\n    try{\n      if(categoryId !== undefined){\n        const category = await categoryService.putNewCategory({\n          id: categoryId,\n          parentCategoryId: categorySelected\n        }, loggedIn.token)\n        dispatch({\n          type: 'REPLACE_CATEGORY',\n          data: category\n        })\n        dispatch(displayNotificationForSeconds('Kategoria muutettu', 'success', 5))\n      } else if(productId !== undefined) {\n        const productModified = await productService.putNewCategory({\n          id: productId,\n          parentCategoryId: categorySelected\n        }, loggedIn.token)\n        dispatch({\n          type: 'REPLACE_PRODUCT',\n          data: productModified\n        })\n        dispatch(displayNotificationForSeconds('Kategoria muutettu', 'success', 5))\n      }\n    }\n    catch(error) {\n      dispatch(displayNotificationForSeconds('Kategorian muutto epäonnistui', 'error', 5))\n    }\n  }\n\n\n  // SUBCOMPONENTS:\n\n  const newCategorySelector = () =>\n    <FormControl variant=\"outlined\" className={classesSizeSelect.formControl}>\n      <InputLabel id=\"size-select\" className={classesSizeSelect.marginPlease}>Kategorian uusi isäntä</InputLabel>\n      <Select\n        labelId=\"size-select-label-id\"\n        id=\"size-select-id\"\n        value={categorySelected}\n        onChange={handleCategoryChange}\n        label=\"Tuotteen uusi kategoria\"\n        className={classesSizeSelect.select}\n      >\n        {getAsListOfIdsAndPaths(categories).map(item => <MenuItem key={item.id} value={item.id}>{item.path}</MenuItem>)}\n      </Select>\n    </FormControl>\n\n\n  // MAIN COMPONENT:\n\n  return (\n    <>\n      {newCategorySelector()}\n      <Button\n        variant=\"contained\"\n        color=\"primary\"\n        className={classesSizeSelect.marginPlease}\n        onClick={handleCategoryUpdate}\n        startIcon={<SaveIcon />}\n      >\n                tallenna\n      </Button>\n    </>\n  )\n}\n\nexport default CategoryUpdateForm\n","// This form is in the components-folder and not in the assisting components -folder, because\n// this form is also an independent page, besides being used in a page.\nimport React from 'react'\nimport { useSelector } from 'react-redux'\nimport { useDispatch } from 'react-redux'\nimport { displayNotificationForSeconds } from '../reducers/notificationReducer'\nimport categoryService from '../services/categories'\n\n// Material UI:\nimport { makeStyles } from '@material-ui/core/styles'\nimport TextField from '@material-ui/core/TextField'\nimport Button from '@material-ui/core/Button'\nimport Paper from '@material-ui/core/Paper'\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    '& .MuiTextField-root': {\n      margin: theme.spacing(1),\n      width: '25ch',\n    },\n  },\n}))\n\n// handleCloseNewCategoryForm is optional, and giving it causes a close form -button to be shown on the form.\nconst CategoryAdditionForm = ({ parentCategoryIdForNewCategory, handleCloseNewCategoryForm }) => {\n  const classes = useStyles()\n\n  const adminToken = useSelector(state => state.customers.loggedIn.token)\n  const dispatch = useDispatch()\n\n  const [name, setName] = React.useState('')\n  const [description, setDescription] = React.useState('')\n  const [disabled, setDisabled] = React.useState(false)\n\n  const handleNameChange = (event) => {\n    setName(event.target.value)\n  }\n  const handleDescriptionChange = (event) => {\n    setDescription(event.target.value)\n  }\n\n  const handleAddNewCategory = async () => {\n    setDisabled(true)\n\n    try{\n      const category = await categoryService.post({\n        parentCategoryId: parentCategoryIdForNewCategory,\n        name,\n        description\n      }, adminToken)\n      if(handleCloseNewCategoryForm !== undefined) handleCloseNewCategoryForm()\n      setName('')\n      setDescription('')\n      setDisabled(false)\n      dispatch({\n        type: 'ADD_NEW_CATEGORY',\n        data: category\n      })\n      dispatch(displayNotificationForSeconds('Kategoria lisätty', 'success', 5))\n    }\n    catch(error) {\n      setDisabled(false)\n      dispatch(displayNotificationForSeconds('Kategorian lisäys epäonnistui', 'error', 5))\n    }\n  }\n\n\n  // SUBCOMPONENTS:\n\n  const closeFormButtonOrNothing = () => {\n    if(handleCloseNewCategoryForm !== undefined) {\n      return <Button size=\"small\" color=\"primary\" disabled={disabled} onClick={handleCloseNewCategoryForm}>KIINNI</Button>\n    }\n  }\n\n\n  // MAIN COMPONENT:\n\n  return (\n    <Paper>\n      <form className={classes.root} noValidate autoComplete=\"off\">\n        <div>\n          <TextField required id=\"standard-required\" label=\"Kategorian nimi\" value={name} onChange={handleNameChange} />\n          <TextField id=\"standard-required\" label=\"Kuvaus\" value={description} onChange={handleDescriptionChange} />\n          <Button size=\"small\" disabled={disabled} onClick={handleAddNewCategory}>Lisää kategoria</Button>\n          {closeFormButtonOrNothing()}\n        </div>\n      </form>\n    </Paper>\n  )\n}\n\nexport default CategoryAdditionForm","const eurosToFormattedEuros = new Intl.NumberFormat('fi-FI', {\n  style: 'currency',\n  currency: 'EUR',\n  minimumFractionDigits: 2,\n  maximumFractionDigits: 2\n})\n\nconst eurosToFormattedEurosWithoutE = new Intl.NumberFormat('fi-FI', {\n  minimumFractionDigits: 2,\n  maximumFractionDigits: 2,\n})\n\nexport const centsToFormattedEuros = (cents) => {\n  return eurosToFormattedEuros.format(cents/100)\n}\n\nexport const centsToFormattedEurosWithoutE = (cents) => {\n  return eurosToFormattedEurosWithoutE.format(cents/100)\n}\n\nexport const userInputPriceToCleanedEuros = (userInput) => {\n  return Number(Number(userInput.replace(',', '.').replace(/\\s+/g, '')).toFixed(2))\n}\n","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport { useDispatch } from 'react-redux'\nimport { displayNotificationForSeconds } from '../reducers/notificationReducer'\nimport { centsToFormattedEuros } from '../utils/Money'\n\n// Material UI:\nimport { makeStyles } from '@material-ui/core/styles'\nimport OutlinedInput from '@material-ui/core/OutlinedInput'\nimport FormControl from '@material-ui/core/FormControl'\nimport InputLabel from '@material-ui/core/InputLabel'\nimport Button from '@material-ui/core/Button'\nimport Typography from '@material-ui/core/Typography'\nimport Select from '@material-ui/core/Select'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart'\n\nconst useStylesSizeSelect = makeStyles((theme) => ({\n  formControl: {\n    margin: theme.spacing(1),\n    marginLeft: '0px',\n    minWidth: 120,\n  },\n  formControlQuantity: {\n    margin: theme.spacing(1),\n    width: 85,\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2),\n  },\n  horizontalUpperLayout: {\n    width: '100%',\n  },\n  marginPlease: {\n    margin: theme.spacing(1),\n  },\n  horizontalLayoutLeft: {\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'center',\n    float: 'left',\n  },\n  horizontalLayoutRight: {\n    display: 'flex',\n    flexDirection: 'row-reverse',\n    alignItems: 'center',\n    float: 'right',\n  },\n  typographyStylePrice: {\n    color: 'red',\n    margin: '10px',\n    fontSize: '20px',\n    fontWeight: 450,\n  }\n}))\n\nconst AddToShoppingCartForm = ({ product }) => {\n  const classesSizeSelect = useStylesSizeSelect()\n\n  const loggedIn = useSelector(state => state.customers.loggedIn)\n  const dispatch = useDispatch()\n\n  const [priceAndSize, setPriceAndSize] = React.useState(product.pricesandsizes[0])\n  const [quantity, setQuantity] = React.useState(1)\n\n  const handleChange = (event) => {\n    setPriceAndSize(event.target.value)\n  }\n  const handleQuantityChange = (event) => {\n    const quantityInput = Math.round(Number(event.target.value))\n    if (quantityInput >= 1) setQuantity(quantityInput)\n    else setQuantity(1)\n  }\n\n  const handleAddToCart = () => {\n    const product_time = new Date().getTime()\n    const product_name = product.name\n    const product_id = product.id\n    dispatch({\n      type: 'ADD_TO_CART',\n      data: { product_time, product_name, product_id, priceAndSize, quantity }\n    })\n    dispatch(displayNotificationForSeconds('Lisätty ostoskoriin', 'success', 5))\n  }\n\n\n  // SUBCOMPONENTS:\n\n  const quantityInput = () =>\n    <FormControl variant=\"outlined\" className={classesSizeSelect.formControlQuantity}>\n      <InputLabel htmlFor=\"component-outlined\">Lukumäärä</InputLabel>\n      <OutlinedInput id=\"lukumaara\" value={quantity} onChange={handleQuantityChange} label=\"Lukumäärä\" type=\"number\" />\n    </FormControl>\n\n  const CustomerToCartButton = () => {\n    if (loggedIn != null && loggedIn.name != undefined) {\n      return (\n        <>\n          <Button\n            variant=\"outlined\"\n            color=\"primary\"\n            size=\"medium\"\n            className={classesSizeSelect.marginPlease}\n            onClick={handleAddToCart}\n            startIcon={<ShoppingCartIcon />}\n          >\n            ostoskoriin\n          </Button>\n        </>\n      )\n    } else return (\n      <Button\n        variant=\"outlined\"\n        color=\"primary\"\n        size=\"medium\"\n        className={classesSizeSelect.marginPlease}\n        disabled\n        startIcon={<ShoppingCartIcon />}\n      >\n        ostoskoriin\n      </Button>\n    )\n  }\n\n\n  // MAIN COMPONENT:\n\n  return (\n    <div className={classesSizeSelect.horizontalUpperLayout}>\n      <div className={classesSizeSelect.horizontalLayoutLeft}>\n        <FormControl variant=\"outlined\" className={classesSizeSelect.formControl}>\n          <InputLabel id=\"size-select\">Koko</InputLabel>\n          <Select\n            labelId=\"size-select-label-id\"\n            id=\"size-select-id\"\n            value={priceAndSize}\n            onChange={handleChange}\n            label=\"Koko\"\n          >\n            {product.pricesandsizes.map(priceAndSizeOption => <MenuItem key={priceAndSizeOption.size} value={priceAndSizeOption}>{priceAndSizeOption.size} - {centsToFormattedEuros(priceAndSizeOption.price)}</MenuItem> )}\n          </Select>\n        </FormControl>\n\n        {quantityInput()}\n      </div>\n\n      <div className={classesSizeSelect.horizontalLayoutRight}>\n        {CustomerToCartButton()}\n\n        <Typography variant=\"body2\" component=\"p\" className={classesSizeSelect.typographyStylePrice}>{centsToFormattedEuros(priceAndSize.price*quantity)}</Typography>\n      </div>\n\n    </div>\n  )\n}\n\nexport default AddToShoppingCartForm","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport { useDispatch } from 'react-redux'\nimport { displayNotificationForSeconds } from '../reducers/notificationReducer'\nimport productService from '../services/products'\n\n// Material UI:\nimport Typography from '@material-ui/core/Typography'\nimport Switch from '@material-ui/core/Switch'\n\n\nconst AvailabilityUpdateSwitch = ({ product }) => {\n\n  const admin = useSelector(state => state.customers.loggedIn)\n  const dispatch = useDispatch()\n\n  const [available, setAvailable] = React.useState(product.available)\n\n  const handleAvailabilityChangeAndUpdate = async () => {\n    try{\n      const addedProduct = await productService.putAvailable({\n        id: product.id,\n        available: !available,\n      }, admin.token)\n      setAvailable(!available)\n      dispatch({\n        type: 'REPLACE_PRODUCT',\n        data: addedProduct\n      })\n      dispatch(displayNotificationForSeconds('Tuotteen saatavuus muutettu', 'success', 5))\n    }\n    catch(error) {\n      dispatch(displayNotificationForSeconds('Tuotteen saatavuuden muuttaminen epäonnistui', 'error', 5))\n    }\n  }\n\n\n  // MAIN COMPONENT:\n\n  return (\n    <>\n      <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">Piilotettu asiakkailta</Typography>\n      <Switch\n        checked={available}\n        onChange={handleAvailabilityChangeAndUpdate}\n        name=\"checkedA\"\n        inputProps={{ 'aria-label': 'secondary checkbox' }}\n      />\n      <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">Tuote näkyvillä</Typography>\n    </>\n  )\n}\n\nexport default AvailabilityUpdateSwitch","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport { useDispatch } from 'react-redux'\nimport { displayNotificationForSeconds } from '../reducers/notificationReducer'\nimport { centsToFormattedEurosWithoutE } from '../utils/Money'\nimport { userInputPriceToCleanedEuros } from '../utils/Money'\nimport productService from '../services/products'\n\n// Material UI:\nimport { makeStyles } from '@material-ui/core/styles'\nimport IconButton from '@material-ui/core/IconButton'\nimport TextField from '@material-ui/core/TextField'\nimport HighlightOffIcon from '@material-ui/icons/HighlightOff'\nimport Button from '@material-ui/core/Button'\n\nconst useStylesNewCard = makeStyles((theme) => ({\n  horizontalLayout: {\n    display: 'flex',\n    flexDirection: 'row',\n  },\n  verticalLayout: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  button: {\n    marginTop: theme.spacing(2),\n  }\n}))\n\n// Update-mode (function as an independent form in order to update some product's pricesAndSizes data): product, undefined, undefined\n// Set-mode (feed pricesAndSizes data to parent): undefined, pricesAndSizesParent, setPricesAndSizesParent\nconst PricesAndSizesForm = ({ product, pricesAndSizesParent, setPricesAndSizesParent }) => {\n  const classesNewCard = useStylesNewCard()\n\n  const admin = useSelector(state => state.customers.loggedIn)\n  const dispatch = useDispatch()\n\n  // Cents to price:\n  const transformedPricesAndSizes = []\n  if(product != null){\n    for(let pAndS of product.pricesandsizes) {\n      transformedPricesAndSizes.push({ price: centsToFormattedEurosWithoutE(pAndS.price), size: pAndS.size })\n    }\n  }\n\n  // Mode switching:\n\n  let initState\n  if(product == null) initState = pricesAndSizesParent  // Set-mode\n  else initState = transformedPricesAndSizes            // Update-mode\n\n  const [pricesAndSizesOwn, setPricesAndSizesOwn] = React.useState(initState)\n\n  let pricesAndSizes\n  let setPricesAndSizes\n  if(product == null) {  // Set-mode\n    pricesAndSizes = pricesAndSizesParent\n    setPricesAndSizes = setPricesAndSizesParent\n  }\n  else {                      // Update-mode\n    pricesAndSizes = pricesAndSizesOwn\n    setPricesAndSizes = setPricesAndSizesOwn\n  }\n\n\n  const handlePriceAndSizeChange = (indexModified, sizeOrPrice) => (event) => {\n    const newArray = []\n    pricesAndSizes.forEach((priceAndSize, index) => {\n      if(index === indexModified && sizeOrPrice === 'size') newArray.push({ price: priceAndSize.price, size: event.target.value })\n      else if(index === indexModified && sizeOrPrice === 'price') newArray.push({ price: event.target.value, size: priceAndSize.size })\n      else newArray.push(priceAndSize)\n    })\n    setPricesAndSizes(newArray)\n  }\n\n  const handlePriceAndSizeAddField = () => {\n    setPricesAndSizes(pricesAndSizes.concat({ price: 0, size: '' }))\n  }\n\n  const handlePriceAndSizeDeleteField = (indexDeleted) => () => {\n    const newArray = []\n    pricesAndSizes.forEach((priceAndSize, index) => {\n      if(index != indexDeleted) newArray.push(priceAndSize)\n    })\n    setPricesAndSizes(newArray)\n  }\n\n  const handlePriceAndSizeUpdate = async () => {\n    const newPricesAndSizes = []\n    for(let userInput of pricesAndSizes){\n      let cleanedEuros = userInputPriceToCleanedEuros(userInput.price)\n      if(isNaN(cleanedEuros)) {\n        dispatch(displayNotificationForSeconds('Virheellinen hintatieto', 'error', 5))\n        return\n      } else if(cleanedEuros < 0) {\n        dispatch(displayNotificationForSeconds('Hinta ei voi olla negatiivinen', 'error', 5))\n        return\n      }\n      const cents = Math.trunc(cleanedEuros*100)\n      newPricesAndSizes.push({ price: cents, size: userInput.size })\n    }\n\n    try{\n      const modifiedProduct = await productService.putPricesAndSizes({\n        id: product.id,\n        pricesAndSizes: newPricesAndSizes\n      }, admin.token)\n      dispatch({\n        type: 'REPLACE_PRODUCT',\n        data: modifiedProduct\n      })\n      dispatch(displayNotificationForSeconds('Tuotteen hintatiedot muutettu', 'success', 5))\n    }\n    catch(error) {\n      dispatch(displayNotificationForSeconds('Tuotteen hintatietojen muunttaminen epäonnistui', 'error', 5))\n    }\n  }\n\n\n  // SUBCOMPONENTS:\n\n  const showSendUpdateButtonIfUpdateMode = () => {\n    if(product != undefined) return <Button variant=\"contained\" color=\"primary\" onClick={handlePriceAndSizeUpdate} className={classesNewCard.button}> Tallenna hintatiedot </Button>\n  }\n\n\n  // MAIN COMPONENT:\n\n  return (\n    <>\n      {pricesAndSizes.map((priceAndSize, index) =>\n\n        <div key={index} className={classesNewCard.horizontalLayout}>\n          <TextField id=\"standard-required\" label=\"Koko\" value={priceAndSize.size} onChange={handlePriceAndSizeChange(index, 'size')} />\n          <TextField\n            id=\"standard-number\"\n            label=\"Hinta €\"\n            //type=\"number\"\n            InputLabelProps={{\n              shrink: true,\n            }}\n            value={priceAndSize.price}\n            onChange={handlePriceAndSizeChange(index, 'price')}\n          />\n\n          <IconButton onClick={handlePriceAndSizeDeleteField(index)}>\n            <HighlightOffIcon />\n          </IconButton>\n        </div>\n      )}\n      <br />\n      <div className={classesNewCard.horizontalLayout}>\n        {showSendUpdateButtonIfUpdateMode()}\n        <Button size=\"small\" onClick={handlePriceAndSizeAddField}> Uusi hintatieto</Button>\n      </div>\n    </>\n  )\n}\n\nexport default PricesAndSizesForm","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport { useDispatch } from 'react-redux'\nimport AddToShoppingCartForm from './AddToShoppingCartForm'\nimport CategoryUpdateForm from './CategoryUpdateForm'\nimport AvailabilityUpdateSwitch from './AvailabilityUpdateSwitch'\nimport PricesAndSizesForm from './PricesAndSizesForm'\nimport { displayNotificationForSeconds } from '../reducers/notificationReducer'\nimport productService from '../services/products'\n\n// Material UI:\nimport { makeStyles } from '@material-ui/core/styles'\nimport Card from '@material-ui/core/Card'\nimport CardContent from '@material-ui/core/CardContent'\nimport CardMedia from '@material-ui/core/CardMedia'\nimport Typography from '@material-ui/core/Typography'\nimport IconButton from '@material-ui/core/IconButton'\nimport Collapse from '@material-ui/core/Collapse'\nimport EditIcon from '@material-ui/icons/Edit'\nimport clsx from 'clsx'\nimport Divider from '@material-ui/core/Divider'\nimport TextField from '@material-ui/core/TextField'\nimport Button from '@material-ui/core/Button'\n\nconst switchAndCategoryModStyle = {\n  alignItems: 'center',\n  marginLeft: '30px'\n}\n\n// For new card:\nconst useStylesNewCard = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  horizontalLayout: {\n    display: 'flex',\n    flexDirection: 'row',\n  },\n  verticalLayout: {\n    display: 'flex',\n    flexDirection: 'column',\n    width: '100%'\n  },\n  floatLeft: {\n    float: 'left'\n  },\n  floatRight: {\n    float: 'right'\n  },\n  content: {\n    flex: '1 0 auto',\n    padding: '7px',\n    paddingLeft: '13px',\n  },\n  nameLine: {\n    display: 'flex',\n    flexDirection: 'row',\n    marginBottom: '3px'\n  },\n  button: {\n    marginTop: theme.spacing(2),\n  },\n  cover: {\n    width: 151,\n    minWidth: 151,\n  },\n  marginBottom: {\n    marginBottom: '3px',\n  },\n  expand: {\n    transform: 'rotate(0deg)',\n    marginLeft: 'auto',\n    padding: '3px',\n    transition: theme.transitions.create('transform', {\n      duration: theme.transitions.duration.shortest,\n    }),\n  },\n  expandOpen: {\n    transform: 'rotate(90deg)',\n    padding: '3px',\n  },\n}))\n\n// Product display -mode: product, undefined, undefined\n// Product addition -mode: undefined, parentCategoryIdForNewProduct, handleCloseNewProductForm\nconst ProductCard = ({ product, parentCategoryIdForNewProduct, handleCloseNewProductForm }) => {   \n  const classesNewCard = useStylesNewCard()\n\n  const loggedIn = useSelector(state => state.customers.loggedIn)\n  const dispatch = useDispatch()\n\n  const [name, setName] = React.useState('')  // Product addition form.\n  const [description, setDescription] = React.useState('')  // Product addition form.\n  const [pricesAndSizes, setPricesAndSizes] = React.useState([{ price: 0, size: '' }])  // Product addition form.\n  const [disabled, setDisabled] = React.useState(false)  // Disable product addition form when sending data.\n  const [expanded, setExpanded] = React.useState(false)  // Admin control panel expansion.\n\n  const handleNameChange = (event) => setName(event.target.value)\n  const handleDescriptionChange = (event) => setDescription(event.target.value)\n  const handleExpandClick = () => setExpanded(!expanded)\n\n  const handleAddNewProduct = async () => {\n    setDisabled(true)\n\n    const newPricesAndSizes = []\n    for(let userInput of pricesAndSizes){\n      let asNumber = Number(Number(userInput.price.replace(',', '.').replace(/\\s+/g, '')).toFixed(2))\n      if(isNaN(asNumber)) {\n        dispatch(displayNotificationForSeconds('Virheellinen hintatieto', 'error', 5))\n        return\n      } else if(asNumber < 0) {\n        dispatch(displayNotificationForSeconds('Hinta ei voi olla negatiivinen', 'error', 5))\n        return\n      }\n      asNumber = Math.trunc(asNumber*100)\n      newPricesAndSizes.push({ price: asNumber, size: userInput.size })\n    }\n\n    try {\n      const product = await productService.post({\n        parentCategoryId: parentCategoryIdForNewProduct,\n        name,\n        description,\n        pricesAndSizes: newPricesAndSizes,\n        available: true\n      }, loggedIn.token)\n      handleCloseNewProductForm()\n      setName('')\n      setDescription('')\n      setPricesAndSizes([{ price: 0, size: '' }])\n      dispatch({\n        type: 'ADD_NEW_PRODUCT',\n        data: product\n      })\n      dispatch(displayNotificationForSeconds('Tuote lisätty', 'success', 5))\n    }\n    catch (error) {\n      dispatch(displayNotificationForSeconds('Virhe tuotetta lisättäessä', 'error', 5))\n    }\n    setDisabled(false)\n  }\n\n\n  // SUBCOMPONENTS:\n\n  const TitleOrFieldForIt = () => {\n    if (product != undefined) return (\n      <Typography variant=\"h6\" component=\"h2\">\n        {product.name}\n      </Typography>\n    )\n    else return (\n      <TextField required id=\"standard-required\" label=\"Tuotteen nimi\" value={name} onChange={handleNameChange} />\n    )\n  }\n\n  const VisibilityInfoOrNothing = () => {\n    if (product != undefined && !product.available) return (\n      <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n        &nbsp;&nbsp;&nbsp; Tuote on piilotettu asiakkailta\n      </Typography>\n    )\n\n  }\n\n  const EditButtonOrNothing = () => {\n    if (product != undefined && loggedIn != null && loggedIn.admin != undefined) return (\n      <IconButton\n        className={clsx(classesNewCard.expand, {\n          [classesNewCard.expandOpen]: expanded,\n        })}\n        onClick={handleExpandClick}\n        aria-expanded={expanded}\n        aria-label=\"show more\"\n      >\n        <EditIcon />\n      </IconButton>\n    )\n  }\n\n  const DescriptionOrFieldForIt = () => {\n    if (product != undefined) return (\n      <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\" className={classesNewCard.marginBottom}>\n        {product.description}\n      </Typography>\n    )\n    else return (\n      <TextField multiline rows={2} id=\"standard-required\" label=\"Kuvaus\" value={description} onChange={handleDescriptionChange} />\n    )\n  }\n\n  const ToCartOrPricesAndSizesInputAndSend = () => {\n    if (product != undefined) return (\n      <AddToShoppingCartForm product={product} />\n    )\n    else return (\n      <>\n        <PricesAndSizesForm pricesAndSizesParent={pricesAndSizes} setPricesAndSizesParent={setPricesAndSizes} />\n        <Button size=\"small\" disabled={disabled} onClick={handleAddNewProduct}>Lisää tuote</Button>\n        <Button size=\"small\" color=\"primary\" disabled={disabled} onClick={handleCloseNewProductForm}>KIINNI</Button>\n      </>\n    )\n  }\n\n  const adminControlsOrNothing = () => {\n    if (product != undefined) return (\n      <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\n        <Divider />\n        <CardContent>\n          <div className={classesNewCard.horizontalLayout}>\n            <div className={classesNewCard.verticalLayout}>\n              <PricesAndSizesForm product={product} />            {/* PricesAndSizesForm is used here in Update-mode */}\n            </div>\n            <Divider orientation=\"vertical\" flexItem />\n            <div className={classesNewCard.verticalLayout}>\n              <div className={classesNewCard.horizontalLayout} style={switchAndCategoryModStyle}>\n                <AvailabilityUpdateSwitch product={product} />\n              </div>\n              <div className={classesNewCard.horizontalLayout} style={switchAndCategoryModStyle}>\n                <CategoryUpdateForm productId={product.id} />\n              </div>\n            </div>\n          </div>\n        </CardContent>\n      </Collapse>\n    )\n  }\n\n  const productPictureOrBlank = () => {\n    if (product != undefined && product.picture != null) return (\n      <CardMedia\n        className={classesNewCard.cover}\n        image={'/' + product.picture.URL}\n        title={product.picture.desc}\n      />\n    )\n    else return (\n      <CardMedia\n        className={classesNewCard.cover}\n        image=\"/paleBlue.jpg\"\n        title=\"Pale blue picture\"\n      />\n    )\n  }\n\n\n  // MAIN COMPONENT:\n\n  return (\n    <Card className={classesNewCard.root}>\n      <div className={classesNewCard.horizontalLayout}>\n        {productPictureOrBlank()}\n        <div className={classesNewCard.verticalLayout}>\n          <CardContent className={classesNewCard.content}>\n            <div className={classesNewCard.nameLine}>\n              {TitleOrFieldForIt()}\n              {VisibilityInfoOrNothing()}\n              {EditButtonOrNothing()}\n            </div>\n            {DescriptionOrFieldForIt()}\n            {ToCartOrPricesAndSizesInputAndSend()}\n          </CardContent>\n        </div>\n      </div>\n      {adminControlsOrNothing()}\n    </Card>\n  )\n}\n\nexport default ProductCard","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport { useDispatch } from 'react-redux'\nimport { useHistory } from 'react-router-dom'\nimport BreadcrumbsLinks from './BreadcrumbsLinks'\nimport CategoryUpdateForm from './CategoryUpdateForm'\nimport CategoryAdditionForm from '../components/CategoryAdditionForm'\nimport ProductCard from './ProductCard'\nimport { displayNotificationForSeconds } from '../reducers/notificationReducer'\nimport categoryService from '../services/categories'\n\n// Material UI:\nimport { makeStyles } from '@material-ui/core/styles'\nimport EditIcon from '@material-ui/icons/Edit'\nimport IconButton from '@material-ui/core/IconButton'\nimport clsx from 'clsx'\nimport Typography from '@material-ui/core/Typography'\nimport DeleteIcon from '@material-ui/icons/Delete'\nimport Divider from '@material-ui/core/Divider'\nimport Button from '@material-ui/core/Button'\nimport Collapse from '@material-ui/core/Collapse'\nimport Paper from '@material-ui/core/Paper'\n\nconst useStylesSizeSelect = makeStyles((theme) => ({\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120,\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2),\n  },\n  horizontalUpperLayout: {\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  horizontalLayoutLeft: {\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'center',\n    width: '50%',\n  },\n  horizontalLayoutRight: {\n    display: 'flex',\n    flexDirection: 'row-reverse',\n    alignItems: 'center',\n    width: '50%',\n  },\n  marginPlease: {\n    margin: theme.spacing(1),\n  },\n  marginRight: {\n    margin: theme.spacing(1),\n    marginRight: '20px',\n  },\n  select: {\n    margin: theme.spacing(1),\n    minWidth: 250\n  },\n}))\n\nconst useStylesNewCard = makeStyles((theme) => ({\n  expand: {\n    float: 'left',\n    transform: 'rotate(0deg)',\n    marginLeft: 'auto',\n    transition: theme.transitions.create('transform', {\n      duration: theme.transitions.duration.shortest,\n    }),\n  },\n  expandOpen: {\n    float: 'left',\n    transform: 'rotate(90deg)',\n  },\n}))\n\nconst CategoryHeader = (props) => {\n  const classesSizeSelect = useStylesSizeSelect()\n  const classesNewCard = useStylesNewCard()\n\n  const categoryDisplayed = useSelector(state => state.categories.find(category => category.id === props.id))\n  const subCategories = useSelector(state => state.categories.filter(category => category.category_id === props.id))\n  const products = useSelector(state => state.products.filter(product => product.category_id === props.id))\n  const loggedIn = useSelector(state => state.customers.loggedIn)\n  const dispatch = useDispatch()\n  const history = useHistory()\n\n  const [showNewProductForm, setShowNewProductForm] = React.useState(false)\n  const [showNewCategoryForm, setShowNewCategoryForm] = React.useState(false)\n  const [expandedCategoryModificationControls, setExpandedCategoryModificationControls] = React.useState(false)\n\n  const handleShowNewProductForm = () => {\n    setShowNewProductForm(true)\n  }\n  const handleShowNewCategoryForm = () => {\n    setShowNewCategoryForm(true)\n  }\n  const handleCloseNewProductForm = () => {\n    setShowNewProductForm(false)\n  }\n  const handleCloseNewCategoryForm = () => {\n    setShowNewCategoryForm(false)\n  }\n  const handleExpandCategoryModificationControls = () => {\n    setExpandedCategoryModificationControls(!expandedCategoryModificationControls)\n  }\n\n  const handleDeleteCategory = async () => {\n    try{\n      await categoryService.deleteCategory(categoryDisplayed.id, loggedIn.token)\n      history.push('/')\n      dispatch({\n        type: 'DELETE_CATEGORY',\n        data: categoryDisplayed.id\n      })\n      dispatch(displayNotificationForSeconds('Kategoria poistettu', 'success', 5))\n    }\n    catch(error) {\n      dispatch(displayNotificationForSeconds('Kategorian poisto epäonnistui', 'error', 5))\n    }\n  }\n\n\n  // SUBCOMPONENTS:\n\n  const categoryDeleteButtonOrInstructions = () => {\n    if(subCategories.length === 0 && products.length === 0) return (\n      <Button\n        variant=\"contained\"\n        color=\"secondary\"\n        startIcon={<DeleteIcon />}\n        className={classesSizeSelect.marginRight}\n        onClick={handleDeleteCategory}\n      >\n        Poista kategoria\n      </Button>\n\n    )\n    else return (\n      <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\" className={classesSizeSelect.marginRight}>\n        Kategorian on oltava tyhjä jotta sen voi poistaa\n      </Typography>\n    )\n  }\n\n  const newProductForm = () =>\n    <div>\n      <Collapse in={showNewProductForm} timeout=\"auto\" unmountOnExit>\n        <ProductCard parentCategoryIdForNewProduct={categoryDisplayed.id} handleCloseNewProductForm={handleCloseNewProductForm} />\n      </Collapse>\n    </div>\n\n  const newCategoryForm = () =>\n    <div>\n      <Collapse in={showNewCategoryForm} timeout=\"auto\" unmountOnExit>\n        <CategoryAdditionForm parentCategoryIdForNewCategory={categoryDisplayed.id} handleCloseNewCategoryForm={handleCloseNewCategoryForm} />\n      </Collapse>\n    </div>\n\n  const categoryModificationControls = () =>\n    <div>\n      <Collapse in={expandedCategoryModificationControls} timeout=\"auto\" unmountOnExit>\n        <Paper className={classesSizeSelect.horizontalUpperLayout}>\n          <div className={classesSizeSelect.horizontalLayoutLeft}>\n            <CategoryUpdateForm categoryId={categoryDisplayed.id} />\n          </div>\n          <Divider orientation=\"vertical\" flexItem />\n          <div className={classesSizeSelect.horizontalLayoutRight}>\n            {categoryDeleteButtonOrInstructions()}\n          </div>\n        </Paper>\n      </Collapse>\n    </div>\n\n  const AdminExpandCategoryModificationControlsButton = () => {\n    if (loggedIn != null && loggedIn.admin != undefined) {\n      return (\n        <IconButton \n          className={clsx(classesNewCard.expand, {\n            [classesNewCard.expandOpen]: expandedCategoryModificationControls,\n          })}\n          onClick={handleExpandCategoryModificationControls}\n          aria-expanded={expandedCategoryModificationControls}\n          aria-label=\"show more\"\n        >\n          <EditIcon />\n        </IconButton>\n      )\n    }\n  }\n\n  const AdminNewProductAndCategoryButtons = () => {\n    if (loggedIn != null && loggedIn.admin != undefined) {\n      return (\n        <>\n          <Button variant=\"contained\" color=\"primary\" onClick={handleShowNewProductForm} className={classesSizeSelect.marginPlease}>uusi tuote</Button>\n          <Button variant=\"contained\" color=\"primary\" onClick={handleShowNewCategoryForm} className={classesSizeSelect.marginPlease}>uusi alakategoria</Button>\n        </>\n      )\n    }\n  }\n\n\n  // MAIN COMPONENT:\n\n  if(categoryDisplayed !== undefined) {  // This check is due to the problem of delayed initialization when non-root ULR is reloaded.\n    return (\n      <>\n        <div className={classesSizeSelect.horizontalUpperLayout}>\n          <div className={classesSizeSelect.horizontalLayoutLeft}>\n            <BreadcrumbsLinks categoryId={categoryDisplayed.id} />\n        | &nbsp;&nbsp;&nbsp; {categoryDisplayed.description}\n            <div>\n              {AdminExpandCategoryModificationControlsButton()}\n            </div>\n          </div>\n\n          <div className={classesSizeSelect.horizontalLayoutRight}>\n            {AdminNewProductAndCategoryButtons()}\n          </div>\n\n        </div>\n\n        {newProductForm()}\n        {newCategoryForm()}\n        {categoryModificationControls()}\n      </>\n    )\n  } else {\n    return <> </>\n  }\n\n\n}\n\nexport default CategoryHeader","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport { Link } from 'react-router-dom'\nimport CategoryHeader from '../assistingComponents/CategoryHeader'\nimport ProductCard from '../assistingComponents/ProductCard'\n\n// Material UI:\nimport { makeStyles } from '@material-ui/core/styles'\nimport Chip from '@material-ui/core/Chip'\n\nconst useStylesSizeSelect = makeStyles((theme) => ({\n  chipStyle: {\n    margin: theme.spacing(0.5),\n  },\n}))\n\nconst CategoryPage = (props) => {\n  const classesSizeSelect = useStylesSizeSelect()\n\n  const subCategories = useSelector(state => state.categories.filter(category => category.category_id === props.id))\n  const products = useSelector(state => state.products.filter(product => product.category_id === props.id))\n\n\n  // MAIN COMPONENT:\n\n  return (\n    <>\n      <CategoryHeader id={props.id} />\n      <br />\n\n      {subCategories.map(category =>\n        <Link to={`/kategoriat/${category.id}`} key={category.id}>\n          <Chip label={category.name} clickable color=\"primary\" className={classesSizeSelect.chipStyle} />\n        </Link>\n      )}\n\n      <br />\n      <br />\n\n      {products.map(product =>\n        <div key={product.id}>\n          <ProductCard product={product} />\n          <br />\n        </div>\n      )}\n    </>\n  )\n}\n\nexport default CategoryPage","import axios from 'axios'\n\nconst baseUrl = '/api/orders'\n\n// For customer:\n\nconst getOfCustomerWithDetails = async (customerToken) => {\n  const response = await axios.get(baseUrl + '/ofCustomerWithDetails', { headers: { authorization: 'bearer ' + customerToken } })\n  return response.data\n}\n\nconst post = async (order, customerToken) => {\n  const response = await axios.post(baseUrl, order, { headers: { authorization: 'bearer ' + customerToken } })\n  return response.data\n}\n\n// For admin:\n\nconst getOneWithDetails = async (id, adminToken) => {\n  const response = await axios.get(baseUrl + '/details/' + id, { headers: { authorization: 'bearer ' + adminToken } })\n  return response.data\n}\n\nconst getUndispatchedWithDetails = async (adminToken) => {\n  const response = await axios.get(baseUrl + '/undispatchedWithDetails', { headers: { authorization: 'bearer ' + adminToken } })\n  return response.data\n}\n\nconst getDispatched = async (adminToken) => {\n  const response = await axios.get(baseUrl + '/dispatched', { headers: { authorization: 'bearer ' + adminToken } })\n  return response.data\n}\n\nconst putInternalNotes = async (idAndInfoToModify, adminToken) => {\n  const response = await axios.put(baseUrl + '/internalNotes', idAndInfoToModify, { headers: { authorization: 'bearer ' + adminToken } })\n  return response.data\n}\n\nconst putOrderDispatched = async (id, adminToken) => {\n  const response = await axios.put(baseUrl + '/orderDispatced', id, { headers: { authorization: 'bearer ' + adminToken } })\n  return response.data\n}\n\nexport default { getOfCustomerWithDetails, post, getUndispatchedWithDetails, putInternalNotes, putOrderDispatched, getDispatched, getOneWithDetails }","import orderService from '../services/orders'\n\n// customers state is \"with details\"\n// cart is in the same format as Orders POST interface, but every item has also product name and time.\n// time is there just to work as an unique key for react when printing arrays, and also to identify order items to be deleted.\n\n// ALL adminsUndispatched have besides \"details\", also customer details.\n\n//  adminsDispatched has \"details\" and customer details in those, that admin has clicked for more info.\n\nconst reducer = (state = { customers: [], cart: [], adminsUndispatched: [], adminsDispatched: [] }, action) => {\n  switch (action.type) {\n  case 'INIT_CUSTOMERS_ORDERS':\n    return { customers: action.data, cart: state.cart, adminsUndispatched: state.adminsUndispatched, adminsDispatched: state.adminsDispatched }\n  case 'INIT_ADMINS_UNDISPATCHED_ORDERS':\n    return { customers: state.customers, cart: state.cart, adminsUndispatched: action.data, adminsDispatched: state.adminsDispatched }\n  case 'INIT_ADMINS_DISPATCHED_ORDERS':\n    return { customers: state.customers, cart: state.cart, adminsUndispatched: state.adminsUndispatched, adminsDispatched: action.data }\n  case 'REPLACE_ADMINS_UNDISPATCHED_KEEP_DETAILS':\n    const newAdmins = []\n\n    for(let order of state.adminsUndispatched){\n      if(order.id === action.data.id) {\n        newAdmins.push({ ...action.data, orderDetails: order.orderDetails, name: order.name, address: order.address, mobile: order.mobile, email: order.email })\n      } else {\n        newAdmins.push(order)\n      }\n    }\n\n    return { customers: state.customers, cart: state.cart, adminsUndispatched: newAdmins, adminsDispatched: state.adminsDispatched }\n  case 'MODIFY_ADMINS_UNDISPATCHED_TRANSFER_TO_DISPATCHED_KEEP_DETAILS':\n    const newUndispatched = []\n    let newDispatched = state.adminsDispatched\n\n    for(let order of state.adminsUndispatched){\n      if(order.id === action.data.id) {\n        newDispatched = state.adminsDispatched.concat({ ...action.data, orderDetails: order.orderDetails, name: order.name, address: order.address, mobile: order.mobile, email: order.email })\n      } else {\n        newUndispatched.push(order)\n      }\n    }\n\n    return { customers: state.customers, cart: state.cart, adminsUndispatched: newUndispatched, adminsDispatched: newDispatched }\n  case 'REPLACE_ADMINS_DISPATCHED_COMPLETELY':\n    const ordersImmuted = []\n\n    for(let order of state.adminsDispatched){\n      if(order.id === action.data.id) {\n        ordersImmuted.push({ ...action.data })\n      } else {\n        ordersImmuted.push(order)\n      }\n    }\n\n    return { customers: state.customers, cart: state.cart, adminsUndispatched: state.adminsUndispatched, adminsDispatched: ordersImmuted }\n  case 'REPLACE_ADMINS_DISPATCHED_KEEP_DETAILS':\n    const ordersImmuted2 = []\n\n    for(let order of state.adminsDispatched){\n      if(order.id === action.data.id) {\n        ordersImmuted2.push({ ...action.data, orderDetails: order.orderDetails, name: order.name, address: order.address, mobile: order.mobile, email: order.email })\n      } else {\n        ordersImmuted2.push(order)\n      }\n    }\n\n    return { customers: state.customers, cart: state.cart, adminsUndispatched: state.adminsUndispatched, adminsDispatched: ordersImmuted2 }\n  case 'ADD_TO_CART':\n    const newCart = state.cart.concat(action.data)\n    window.localStorage.setItem('cart', JSON.stringify(newCart))\n    return { customers: state.customers, cart: newCart, adminsUndispatched: state.adminsUndispatched, adminsDispatched: state.adminsDispatched }\n  case 'DELETE_FROM_CART':\n    return { customers: state.customers, cart: state.cart.filter(orderItem => orderItem.product_time !== action.data), adminsUndispatched: state.adminsUndispatched, adminsDispatched: state.adminsDispatched }\n  case 'CLEAR_CART':\n    return { customers: state.customers, cart: [], adminsUndispatched: state.adminsUndispatched, adminsDispatched: state.adminsDispatched }\n  default: return state\n  }\n}\n\n// Action creators:\n\nexport const initializeCustomersOrdersWithDetails = (customerToken) => {\n  return async dispatch => {\n    const orders = await orderService.getOfCustomerWithDetails(customerToken)\n    dispatch({\n      type: 'INIT_CUSTOMERS_ORDERS',\n      data: orders\n    })\n  }\n}\n\nexport const initializeAdminsUndispatchedOrdersWithDetails = (adminToken) => {\n  return async dispatch => {\n    const orders = await orderService.getUndispatchedWithDetails(adminToken)\n    dispatch({\n      type: 'INIT_ADMINS_UNDISPATCHED_ORDERS',\n      data: orders\n    })\n  }\n}\n\nexport const getDetailsForAdminsDispatchedOrder = (id, adminToken) => {\n  return async dispatch => {\n    const order = await orderService.getOneWithDetails(id, adminToken)\n    dispatch({\n      type: 'REPLACE_ADMINS_DISPATCHED_COMPLETELY',\n      data: order\n    })\n  }\n}\n\nexport const initializeAdminsDispatchedOrders = (adminToken) => {\n  return async dispatch => {\n    const orders = await orderService.getDispatched(adminToken)\n    dispatch({\n      type: 'INIT_ADMINS_DISPATCHED_ORDERS',\n      data: orders\n    })\n  }\n}\n\nexport default reducer","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport { useDispatch } from 'react-redux'\nimport { getDetailsForAdminsDispatchedOrder } from '../reducers/orderReducer'\nimport { displayNotificationForSeconds } from '../reducers/notificationReducer'\nimport { centsToFormattedEuros } from '../utils/Money'\nimport orderService from '../services/orders'\n\n// Material UI:\nimport { makeStyles } from '@material-ui/core/styles'\nimport clsx from 'clsx'\nimport Typography from '@material-ui/core/Typography'\nimport Button from '@material-ui/core/Button'\nimport Accordion from '@material-ui/core/Accordion'\nimport AccordionDetails from '@material-ui/core/AccordionDetails'\nimport AccordionSummary from '@material-ui/core/AccordionSummary'\nimport Table from '@material-ui/core/Table'\nimport TableBody from '@material-ui/core/TableBody'\nimport TableCell from '@material-ui/core/TableCell'\nimport TableContainer from '@material-ui/core/TableContainer'\nimport TableHead from '@material-ui/core/TableHead'\nimport TableRow from '@material-ui/core/TableRow'\nimport Paper from '@material-ui/core/Paper'\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\nimport TextField from '@material-ui/core/TextField'\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n  },\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n  },\n  secondaryHeading: {\n    fontSize: theme.typography.pxToRem(15),\n    color: theme.palette.text.secondary,\n  },\n  icon: {\n    verticalAlign: 'bottom',\n    height: 20,\n    width: 20,\n  },\n  details: {\n    alignItems: 'center',\n    background: '#e6f7ff',  // AccordionDetails\n  },\n  column: {\n    flexBasis: '33.33%',\n  },\n  helper: {\n    padding: theme.spacing(1, 2),\n  },\n}))\n\nconst useStylesTable = makeStyles({\n  table: {\n    minWidth: 650,\n  },\n})\n\n// Displays order and its details for admin and for customer.\n// For admin: Displays extra details about the order.\n// For admin: Fetches the details of dispatched order on demand.\n// For admin: Displays some controls.\nconst OrderElement = ({ order }) => {\n  const classes = useStyles()\n  const classesTable = useStylesTable()\n\n  const user = useSelector(state => state.customers.loggedIn)\n  const dispatch = useDispatch()\n\n  let internalNoteFieldInit = ''\n  if(order.internalnotes !== null) internalNoteFieldInit = order.internalnotes\n  const [internalNoteField, setInternalNoteField] = React.useState(internalNoteFieldInit)\n\n  const handleInternalNotesChange = (event) => {\n    setInternalNoteField(event.target.value)\n  }\n\n  const handleInternalNotesSubmission = async () => {\n    if (order.orderdispatched === null) {\n      try{\n        const modifiedOrder = await orderService.putInternalNotes({ id: order.id, internalNotes: internalNoteField }, user.token)\n        dispatch({\n          type: 'REPLACE_ADMINS_UNDISPATCHED_KEEP_DETAILS',\n          data: modifiedOrder\n        })\n        dispatch(displayNotificationForSeconds('Tilauksen huomio muutettu', 'success', 5))\n      }\n      catch(error) {\n        dispatch(displayNotificationForSeconds('Tilauksen huomion muuttaminen epäonnistui', 'error', 5))\n      }\n    }\n    else {\n      try{\n        const modifiedOrder = await orderService.putInternalNotes({ id: order.id, internalNotes: internalNoteField }, user.token)\n        dispatch({\n          type: 'REPLACE_ADMINS_DISPATCHED_KEEP_DETAILS',\n          data: modifiedOrder\n        })\n        dispatch(displayNotificationForSeconds('Tilauksen huomio muutettu', 'success', 5))\n      }\n      catch(error) {\n        dispatch(displayNotificationForSeconds('Tilauksen huomion muuttaminen epäonnistui', 'error', 5))\n      }\n    }\n  }\n\n  const handleMarkAsDispatched = async () => {\n    try{\n      const modifiedOrder = await orderService.putOrderDispatched({ id: order.id }, user.token)\n      dispatch({\n        type: 'MODIFY_ADMINS_UNDISPATCHED_TRANSFER_TO_DISPATCHED_KEEP_DETAILS',\n        data: modifiedOrder\n      })\n      dispatch(displayNotificationForSeconds('Tilaus merkitty lähetetyksi', 'success', 5))\n    }\n    catch(error) {\n      dispatch(displayNotificationForSeconds('Tilauksen merkitseminen toimitetuksi epäonnistui', 'error', 5))\n    }\n  }\n\n  const handleExpansion = () => {\n    if(user.admin !==  undefined && order.orderDetails === undefined) dispatch(getDetailsForAdminsDispatchedOrder(order.id, user.token))  // fetch details if needed.\n  }\n\n\n  // SUBCOMPONENTS:\n\n  const orderDetailsDisplay = () => {\n    if(order.orderDetails !== undefined){\n      return (\n        order.orderDetails.map((orderDetail, index) =>   // index should be fine as key, because the data in the table is not modified.\n\n          <TableRow key={index}>\n            <TableCell component=\"th\" scope=\"row\">{orderDetail.name}</TableCell>\n            <TableCell align=\"right\">{orderDetail.priceandsize.size}</TableCell>\n            <TableCell align=\"right\">{centsToFormattedEuros(orderDetail.priceandsize.price)}</TableCell>\n            <TableCell align=\"right\">{orderDetail.quantity}</TableCell>\n            <TableCell align=\"right\">{centsToFormattedEuros(orderDetail.priceandsize.price * orderDetail.quantity)}</TableCell>\n          </TableRow>\n\n        )\n\n      )\n    }\n  }\n\n  const adminDetails = () => {\n    if(user.admin !== undefined) return (\n      <Typography variant=\"caption\">\n      Huomiot: {order.internalnotes} <br />\n      Asiakas ID: {order.customer_id} <br />\n      Nimi: {order.name} <br />\n      Osoite: {order.address} <br />\n      Puhelin: {order.mobile} <br />\n      Email: {order.email} <br />\n      </Typography>\n    )\n  }\n\n  const adminControls = () => {\n    if(user.admin !== undefined) return (\n      <>\n        <TextField id=\"uniikki_id_tanne\" label=\"Huomioiden muokkaus\" value={internalNoteField} variant=\"outlined\" onChange={handleInternalNotesChange} />\n        <Button size=\"small\" onClick={handleInternalNotesSubmission}>Tallenna muutos</Button>\n      </>\n    )\n  }\n\n  const adminMarkAsDispatched = () => {\n    if(user.admin != undefined && order.orderdispatched == null) return (\n      <Button size=\"small\" color=\"primary\" onClick={handleMarkAsDispatched}>Merkitse lähetetyksi</Button>\n    )\n  }\n\n\n  // MAIN COMPONENT:\n\n  return (\n    <Accordion onChange={handleExpansion}>\n      <AccordionSummary\n        expandIcon={<ExpandMoreIcon />}\n        aria-controls=\"panel1c-content\"\n        id=\"panel1c-header\"\n      >\n        <div className={classes.column}>\n          <Typography className={classes.heading}>Tilaus {new Date(order.orderreceived).toLocaleDateString('fi-FI')}</Typography>\n        </div>\n        <div className={classes.column}>\n          <Typography className={classes.secondaryHeading}>{centsToFormattedEuros(order.purchaseprice)}</Typography>\n        </div>\n      </AccordionSummary>\n      <AccordionDetails className={classes.details}>\n\n\n\n\n        <div className={classesTable.column}>\n          <TableContainer component={Paper}>\n            <Table className={classesTable.table} size=\"small\" aria-label=\"a dense table\">\n              <TableHead>\n                <TableRow>\n                  <TableCell>Tuote</TableCell>\n                  <TableCell align=\"right\">Koko</TableCell>\n                  <TableCell align=\"right\">Hinta</TableCell>\n                  <TableCell align=\"right\">Määrä</TableCell>\n                  <TableCell align=\"right\">Hinta yhteensä</TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n\n                {orderDetailsDisplay()}\n\n              </TableBody>\n            </Table>\n          </TableContainer>\n\n          <br />\n          {adminControls()}\n          <br /><br />\n          {adminMarkAsDispatched()}\n        </div>\n\n        <div className={clsx(classes.column, classes.helper)}>\n          <Typography variant=\"caption\">\n        Tilaustunnus: {order.id} <br />\n        Tilaus vastaanotettu: {order.orderreceived} <br />\n        Tuotteet lähetetty: {order.orderdispatched} <br />\n        Hinta: {centsToFormattedEuros(order.purchaseprice)} <br />\n        Lisätiedot: {order.customerinstructions}\n          </Typography>\n          <br />\n          <br />\n          {adminDetails()}\n        </div>\n\n      </AccordionDetails>\n    </Accordion>\n  )\n\n}\n\nexport default OrderElement","import React, { useEffect } from 'react'\nimport { useSelector } from 'react-redux'\nimport { useDispatch } from 'react-redux'\nimport OrderElement from '../assistingComponents/OrderElement'\nimport { initializeCustomersOrdersWithDetails } from '../reducers/orderReducer'\n\n// Material UI:\nimport { makeStyles } from '@material-ui/core/styles'\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n  }\n}))\n\nconst MyOrdersPage = (props) => {\n  const classes = useStyles()\n\n  const customer = useSelector(state => state.customers.loggedIn)\n  const orders = useSelector(state => state.orders.customers)\n  const dispatch = useDispatch()\n\n  useEffect(() => {\n    if(customer !== null) {  // This check is due to the problem of delayed initialization when non-root ULR is reloaded.\n      dispatch(initializeCustomersOrdersWithDetails(customer.token))\n    }\n  }, [dispatch, customer])\n\n\n  // MAIN COMPONENT:\n\n  return (\n    <div className={classes.root}>\n\n      {orders.map(order =>\n        <OrderElement order={order} key={order.id} />\n      )}\n\n    </div>\n  )\n\n}\n\nexport default MyOrdersPage","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport { useDispatch } from 'react-redux'\nimport { initializeCustomersOrdersWithDetails } from '../reducers/orderReducer'\nimport { displayNotificationForSeconds } from '../reducers/notificationReducer'\nimport { centsToFormattedEuros } from '../utils/Money'\nimport orderService from '../services/orders'\n\n// Material UI:\nimport { makeStyles } from '@material-ui/core/styles'\nimport Table from '@material-ui/core/Table'\nimport TableBody from '@material-ui/core/TableBody'\nimport TableCell from '@material-ui/core/TableCell'\nimport TableContainer from '@material-ui/core/TableContainer'\nimport TableHead from '@material-ui/core/TableHead'\nimport TableRow from '@material-ui/core/TableRow'\nimport Paper from '@material-ui/core/Paper'\nimport Button from '@material-ui/core/Button'\n\nconst useStyles = makeStyles({\n  table: {\n    minWidth: 650,\n  },\n})\n\nconst MyOrdersPage = (props) => {\n  const classes = useStyles()\n\n  const cartItems = useSelector(state => state.orders.cart)\n  const customer = useSelector(state => state.customers.loggedIn)\n  const dispatch = useDispatch()\n\n  const [disabled, setDisabled] = React.useState(false)\n\n  const handleDeleteFromCart = (product_time) => {\n    dispatch({\n      type: 'DELETE_FROM_CART',\n      data: product_time\n    })\n  }\n\n  const handleOrderSending = async () => {\n    setDisabled(true)\n\n    try{\n      for(let item of cartItems) {\n        delete item.product_time\n        delete item.product_name\n      }\n\n      await orderService.post(cartItems, customer.token)\n\n      setDisabled(false)\n      // jos onnistuu niin ostoskorin tyhjennys:\n      dispatch({\n        type: 'CLEAR_CART'\n      })\n\n      // Tilaukset haetaan uudestaan koska Orders POST rajapinta ei tällä hetkellä palauta lisättyä tilausta.\n      // Kun tilaukset pyydetään Orders GET rajapinnoilta niin ne tulevat varmasti oikein, siten kun ne ovat tietokannassa.\n      dispatch(initializeCustomersOrdersWithDetails(customer.token))\n      dispatch(displayNotificationForSeconds('Tilaus lähetetty', 'success', 5))\n    }\n    catch(error) {\n      setDisabled(false)\n      dispatch(displayNotificationForSeconds('Tilauksen lähetys epäonnistui', 'error', 5))\n    }\n  }\n\n  // Calculate overall shopping cart price:\n  let overallPriceInCents = 0\n  for(let cartItem of cartItems) overallPriceInCents += cartItem.priceAndSize.price * cartItem.quantity\n\n\n  // MAIN COMPONENT:\n\n  return (\n    <>\n      <TableContainer component={Paper}>\n        <Table className={classes.table} aria-label=\"simple table\">\n          <TableHead>\n            <TableRow>\n              <TableCell>Tuote</TableCell>\n              <TableCell align=\"right\">Koko</TableCell>\n              <TableCell align=\"right\">Hinta</TableCell>\n              <TableCell align=\"right\">Määrä</TableCell>\n              <TableCell align=\"right\">Hinta yhteensä</TableCell>\n              <TableCell align=\"right\"></TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {cartItems.map((cartItem) => (\n              <TableRow key={cartItem.product_time}>\n                <TableCell component=\"th\" scope=\"row\">{cartItem.product_name}</TableCell>\n                <TableCell align=\"right\">{cartItem.priceAndSize.size}</TableCell>\n                <TableCell align=\"right\">{centsToFormattedEuros(cartItem.priceAndSize.price)}</TableCell>\n                <TableCell align=\"right\">{cartItem.quantity}</TableCell>\n                <TableCell align=\"right\">{centsToFormattedEuros(cartItem.priceAndSize.price * cartItem.quantity)}</TableCell>\n                <TableCell align=\"right\">\n                  <Button size=\"small\" color=\"primary\" onClick={() => handleDeleteFromCart(cartItem.product_time)}>\n                  Poista\n                  </Button>\n                </TableCell>\n              </TableRow>\n            ))}\n            <TableRow>\n              <TableCell component=\"th\" scope=\"row\">YHTEENSÄ</TableCell>\n              <TableCell align=\"right\"></TableCell>\n              <TableCell align=\"right\"></TableCell>\n              <TableCell align=\"right\"></TableCell>\n              <TableCell align=\"right\">{centsToFormattedEuros(overallPriceInCents)}</TableCell>\n              <TableCell align=\"right\"></TableCell>\n            </TableRow>\n          </TableBody>\n        </Table>\n      </TableContainer>\n\n      <Button size=\"small\" color=\"primary\" disabled={disabled} onClick={handleOrderSending}>\n      Lähetä tilaus\n      </Button>\n    </>\n\n  )\n}\n\nexport default MyOrdersPage","import React, { useEffect } from 'react'\nimport { useSelector } from 'react-redux'\nimport { useDispatch } from 'react-redux'\nimport OrderElement from '../assistingComponents/OrderElement'\nimport { initializeAdminsDispatchedOrders } from '../reducers/orderReducer'\nimport { initializeAdminsUndispatchedOrdersWithDetails } from '../reducers/orderReducer'\n\n// Material UI:\nimport { makeStyles } from '@material-ui/core/styles'\nimport Typography from '@material-ui/core/Typography'\nimport Button from '@material-ui/core/Button'\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n  }\n}))\n\nconst AdminOrdersPage = (props) => {\n  const classes = useStyles()\n\n  const admin = useSelector(state => state.customers.loggedIn)\n  const orders = useSelector(state => state.orders.adminsUndispatched)\n  const ordersDispatched = useSelector(state => state.orders.adminsDispatched)\n  const dispatch = useDispatch()\n\n  useEffect(() => {\n    if(admin !== null) {  // This check is due to the problem of delayed initialization when non-root ULR is reloaded.\n      dispatch(initializeAdminsUndispatchedOrdersWithDetails(admin.token))\n    }\n  }, [dispatch, admin])\n\n  const [showDispatched, setShowDispatched] = React.useState(false)\n\n  const handleShowDispatchedOrders = () => {\n    dispatch(initializeAdminsDispatchedOrders(admin.token))\n    setShowDispatched(true)\n  }\n\n\n  // SUBCOMPONENTS:\n\n  const dispatchedOrdersDisplay = () => {\n    if (showDispatched) {\n      return (\n        <div className={classes.root}>\n          {ordersDispatched.map(order =>\n            <OrderElement order={order} key={order.id} />\n          )}\n        </div>\n      )}\n  }\n\n\n  // MAIN COMPONENT:\n\n  return (\n    <div className={classes.root}>\n      <Typography gutterBottom variant=\"h5\" component=\"h2\">\n          Lähettämättömät tilaukset\n      </Typography>\n\n      <div className={classes.root}>\n        {orders.map(order =>\n          <OrderElement order={order} key={order.id} />\n        )}\n      </div>\n\n      <br />\n      <Button size=\"small\" color=\"primary\" onClick={handleShowDispatchedOrders}>Näytä lähetetyt tilaukset</Button>\n      <br />\n\n      {dispatchedOrdersDisplay()}\n\n    </div>\n  )\n\n}\n\nexport default AdminOrdersPage","import axios from 'axios'\n\nconst baseUrl = '/api/customers'\n\nconst post = async (customerInfo) => {\n  const response = await axios.post(baseUrl, customerInfo)\n  return response.data\n}\n\nconst postLogin = async (credentials) => {\n  const response = await axios.post(baseUrl + '/login', credentials)\n  return response.data\n}\n\n// For admin:\n\nconst getAll = async (adminToken) => {\n  const response = await axios.get(baseUrl, { headers: { authorization: 'bearer ' + adminToken } })\n  return response.data\n}\n\nconst getOneWithDetails = async (id, adminToken) => {\n  const response = await axios.get(baseUrl + '/' + id, { headers: { authorization: 'bearer ' + adminToken } })\n  return response.data\n}\n\nexport default { post, postLogin, getAll, getOneWithDetails }","import customerService from '../services/customers'\n\nconst reducer = (state = { loggedIn: null }, action) => {\n  switch (action.type) {\n  case 'ADD_LOGGED_IN':\n    return { ...state, loggedIn: action.data }\n  case 'INIT_CUSTOMERS':\n    return { ...state, adminsCustomers: action.data }\n  case 'REPLACE_CUSTOMER':\n    const customersImmuted = []\n\n    for(let customer of state.adminsCustomers){\n      if(customer.id === action.data.id) {\n        customersImmuted.push({ ...action.data })\n      } else {\n        customersImmuted.push(customer)\n      }\n    }\n\n    return { ...state, adminsCustomers: customersImmuted }\n  default: return state\n  }\n}\n\n// Action creators:\n\nexport const initializeCustomers = (adminToken) => {\n  return async dispatch => {\n    const customers = await customerService.getAll(adminToken)\n    dispatch({\n      type: 'INIT_CUSTOMERS',\n      data: customers\n    })\n  }\n}\n\nexport const getDetailsForCustomer = (id, adminToken) => {\n  return async dispatch => {\n    const customer = await customerService.getOneWithDetails(id, adminToken)\n    dispatch({\n      type: 'REPLACE_CUSTOMER',\n      data: customer\n    })\n  }\n}\n\nexport default reducer","import React, { useEffect } from 'react'\nimport { useSelector } from 'react-redux'\nimport { useDispatch } from 'react-redux'\nimport { initializeCustomers, getDetailsForCustomer } from '../reducers/customerReducer'\n\n// Material UI:\nimport { makeStyles } from '@material-ui/core/styles'\nimport Accordion from '@material-ui/core/Accordion'\nimport AccordionDetails from '@material-ui/core/AccordionDetails'\nimport AccordionSummary from '@material-ui/core/AccordionSummary'\nimport Typography from '@material-ui/core/Typography'\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n  },\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n  },\n  secondaryHeading: {\n    fontSize: theme.typography.pxToRem(15),\n    color: theme.palette.text.secondary,\n  },\n  icon: {\n    verticalAlign: 'bottom',\n    height: 20,\n    width: 20,\n  },\n  details: {\n    alignItems: 'center',\n  },\n  column: {\n    flexBasis: '33.33%',\n  },\n  helper: {\n    borderLeft: `2px solid ${theme.palette.divider}`,\n    padding: theme.spacing(1, 2),\n  },\n}))\n\nconst CustomersPage = (props) => {\n  const classes = useStyles()\n\n  const admin = useSelector(state => state.customers.loggedIn)\n  let customers = useSelector(state => state.customers.adminsCustomers)\n  const dispatch = useDispatch()\n\n  useEffect(() => {\n    if(admin !== null) {  // This check is due to the problem of delayed initialization when non-root ULR is reloaded.\n      dispatch(initializeCustomers(admin.token))\n    }\n  }, [dispatch, admin])\n\n  if(customers == null) customers = []  // Initialization delay fix\n\n  const [expanded, setExpanded] = React.useState(false)\n\n  const handleExpansion = (id) => (event, isExpanded) => {\n    if(expanded === id) { // expansion close\n      setExpanded(false)\n      return\n    }\n\n    const customerClicked = customers.find(customer => customer.id == id)\n    if(customerClicked.address === undefined) dispatch(getDetailsForCustomer(id, admin.token))  // fetch details if needed.\n    setExpanded(id)\n  }\n\n\n  // SUBCOMPONENTS:\n\n  const customerDetailsDisplay = (customer) => {\n    if(customer.address !== undefined){\n      return (\n        <Typography variant=\"caption\">\n        Asiakas ID: {customer.id} <br />\n        Nimi: {customer.name} <br />\n        Osoite: {customer.address} <br />\n        Puhelin: {customer.mobile} <br />\n        Email: {customer.email} <br />\n        </Typography>\n      )\n    }\n  }\n\n\n  // MAIN COMPONENT:\n\n  return (\n\n    <div className={classes.root}>\n      {customers.map(customer =>\n\n        <Accordion key={customer.id} expanded={expanded === customer.id} onChange={handleExpansion(customer.id)}>\n          <AccordionSummary\n            expandIcon={<ExpandMoreIcon />}\n            aria-controls=\"panel1c-content\"\n            id=\"panel1c-header\"\n          >\n            <div className={classes.column}>\n              <Typography className={classes.heading}>Asiakas: {customer.name}</Typography>\n            </div>\n          </AccordionSummary>\n          <AccordionDetails className={classes.details}>\n            {customerDetailsDisplay(customer)}\n          </AccordionDetails>\n        </Accordion>\n\n      )}\n    </div>\n\n  )\n}\n\nexport default CustomersPage","import productService from '../services/products'\n\nconst reducer = (state = [], action) => {\n  switch (action.type) {\n  case 'INIT_PRODUCTS':\n    return action.data\n  case 'ADD_NEW_PRODUCT':\n    return state.concat(action.data)\n  case 'REPLACE_PRODUCT':\n    const newArray = []\n    for(let product of state){\n      if(product.id === action.data.id) newArray.push(action.data)\n      else newArray.push(product)\n    }\n    return newArray\n  default: return state\n  }\n}\n\n// Action creators:\n\nexport const initializeAvailableProducts = () => {\n  return async dispatch => {\n    const products = await productService.getAvailable()\n    dispatch({\n      type: 'INIT_PRODUCTS',\n      data: products\n    })\n  }\n}\n\nexport const initializeAllProducts = (adminToken) => {\n  return async dispatch => {\n    const products = await productService.getAll(adminToken)\n    dispatch({\n      type: 'INIT_PRODUCTS',\n      data: products\n    })\n  }\n}\n\nexport default reducer","import React from 'react'\nimport { useDispatch } from 'react-redux'\nimport { Link } from 'react-router-dom'\nimport { useHistory } from 'react-router-dom'\nimport { displayNotificationForSeconds } from '../reducers/notificationReducer'\nimport { initializeAllProducts } from '../reducers/productReducer'\nimport customerService from '../services/customers'\n\n// Material UI:\nimport { makeStyles } from '@material-ui/core/styles'\nimport TextField from '@material-ui/core/TextField'\nimport Button from '@material-ui/core/Button'\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    '& .MuiTextField-root': {\n      margin: theme.spacing(1),\n      width: '25ch',\n    },\n  },\n}))\n\nconst LoginPage = () => {\n  const classes = useStyles()\n\n  const dispatch = useDispatch()\n  const history = useHistory()\n\n  const [email, setEmail] = React.useState('')\n  const [password, setPassword] = React.useState('')\n  const [disabled, setDisabled] = React.useState(false)\n\n  const handleEmailChange = (event) => {\n    setEmail(event.target.value)\n  }\n  const handlePasswordChange = (event) => {\n    setPassword(event.target.value)\n  }\n\n  const handleLogIn = async () => {\n    setDisabled(true)\n\n    try{\n      const tokenAndInfo = await customerService.postLogin({\n        email,\n        password\n      })\n      dispatch({\n        type: 'ADD_LOGGED_IN',\n        data: tokenAndInfo\n      })\n\n      if(tokenAndInfo.admin !== undefined) dispatch(initializeAllProducts(tokenAndInfo.token))\n\n      window.localStorage.setItem('genericStoreUser', JSON.stringify(tokenAndInfo))\n\n      history.push('/')\n\n      dispatch(displayNotificationForSeconds('Tervetuloa!', 'success', 5))\n    }\n    catch(error) {\n      if (error.response.data.error.includes('Incorrect email or password')) dispatch(displayNotificationForSeconds('Virheellinen sähköpostiosoite tai salasana', 'error', 5))\n      else dispatch(displayNotificationForSeconds('Sisäänkirjautuminen epäonnistui', 'error', 5))\n      setDisabled(false)\n    }\n  }\n\n\n  // MAIN COMPONENT:\n\n  return (\n    <form className={classes.root} noValidate autoComplete=\"off\">\n      <div>\n        <TextField required id=\"standard-required\" label=\"Sähköposti\" value={email} onChange={handleEmailChange} />\n        <TextField required id=\"standard-required\" label=\"Salasana\" value={password} onChange={handlePasswordChange} />\n        <br />\n        <Button size=\"small\" disabled={disabled} onClick={handleLogIn}>Kirjaudu sisään</Button>\n        <br />\n        <br />\n        <Link to=\"/rekisteroityminen\">\n          <Button size=\"small\">Rekisteröidy</Button>\n        </Link>\n      </div>\n    </form>\n  )\n}\n\nexport default LoginPage","import React from 'react'\nimport { useDispatch } from 'react-redux'\nimport { useHistory } from 'react-router-dom'\nimport { displayNotificationForSeconds } from '../reducers/notificationReducer'\nimport customerService from '../services/customers'\n\n// Material UI:\nimport { makeStyles } from '@material-ui/core/styles'\nimport TextField from '@material-ui/core/TextField'\nimport Button from '@material-ui/core/Button'\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    '& .MuiTextField-root': {\n      margin: theme.spacing(1),\n      width: '25ch',\n    },\n  },\n}))\n\nconst RegisterPage = () => {\n  const classes = useStyles()\n\n  const dispatch = useDispatch()\n  const history = useHistory()\n\n  const [name, setName] = React.useState('')\n  const [address, setAddress] = React.useState('')\n  const [mobile, setMobile] = React.useState('')\n  const [email, setEmail] = React.useState('')\n  const [password, setPassword] = React.useState('')\n  const [disabled, setDisabled] = React.useState(false)\n\n  const handleNameChange = (event) => {\n    setName(event.target.value)\n  }\n  const handleAddressChange = (event) => {\n    setAddress(event.target.value)\n  }\n  const handleMobileChange = (event) => {\n    setMobile(event.target.value)\n  }\n  const handleEmailChange = (event) => {\n    setEmail(event.target.value)\n  }\n  const handlePasswordChange = (event) => {\n    setPassword(event.target.value)\n  }\n\n  const handleAddNewCustomer = async () => {\n    setDisabled(true)\n\n    try{\n      await customerService.post({\n        name,\n        address,\n        mobile,\n        email,\n        password\n      })\n      history.push('/kirjautuminen')\n      dispatch(displayNotificationForSeconds('Rekisteröityminen onnistui', 'success', 5))\n    }\n    catch(error){\n      if (error.response.data.error.includes('violates unique constraint')) dispatch(displayNotificationForSeconds('Virheellinen sähköpostiosoite', 'error', 5))\n      else dispatch(displayNotificationForSeconds('Rekisteröityminen epäonnistui', 'error', 5))\n      setDisabled(false)\n    }\n  }\n\n\n  // MAIN COMPONENT:\n\n  return (\n    <form className={classes.root} noValidate autoComplete=\"off\">\n      <div>\n        <TextField required id=\"standard-required\" label=\"Nimi\" value={name} onChange={handleNameChange} />\n        <TextField required id=\"standard-required\" label=\"Osoite\" value={address} onChange={handleAddressChange} />\n        <TextField required id=\"standard-required\" label=\"Puhelinnumero\" value={mobile} onChange={handleMobileChange} />\n        <TextField required id=\"standard-required\" label=\"Sähköposti\" value={email} onChange={handleEmailChange} />\n        <TextField required id=\"standard-required\" label=\"Salasana\" value={password} onChange={handlePasswordChange} />\n        <br />\n        <Button size=\"small\" disabled={disabled} onClick={handleAddNewCustomer}>Lähetä</Button>\n      </div>\n    </form>\n  )\n}\n\nexport default RegisterPage","import React from 'react'\nimport { useSelector } from 'react-redux'\n\n// Material UI:\nimport { makeStyles } from '@material-ui/core/styles'\nimport Snackbar from '@material-ui/core/Snackbar'\nimport MuiAlert from '@material-ui/lab/Alert'\n\nfunction Alert(props) {\n  return <MuiAlert elevation={6} variant=\"filled\" {...props} />\n}\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n    '& > * + *': {\n      marginTop: theme.spacing(2),\n    },\n  },\n}))\n\nconst Notification = () => {\n  const classes = useStyles()\n\n  const notification = useSelector(state => state.notification)\n\n\n  // MAIN COMPONENT:\n\n  if (notification.text !== '') {\n    return (\n      <div className={classes.root}>\n        <Snackbar anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'left',\n        }}\n          open={true}>\n          <Alert severity={notification.severity}>\n            {notification.text}\n          </Alert>\n        </Snackbar>\n      </div>\n    )\n  } else {\n    return null\n  }\n}\n\nexport default Notification\n","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport { Switch, Route, useRouteMatch } from 'react-router-dom'\nimport { Redirect } from 'react-router-dom'\nimport Menu from './Menu'\nimport CategoryPage from './CategoryPage'\nimport MyOrdersPage from './MyOrdersPage'\nimport MyCartPage from './MyCartPage'\nimport AdminOrdersPage from './AdminOrdersPage'\nimport CustomersPage from './CustomersPage'\nimport LoginPage from './LoginPage'\nimport RegisterPage from './RegisterPage'\nimport CategoryAdditionForm from './CategoryAdditionForm'\nimport Notification from '../assistingComponents/Notification'\n\n// Material UI:\nimport AppBar from '@material-ui/core/AppBar'\nimport CssBaseline from '@material-ui/core/CssBaseline'\nimport Drawer from '@material-ui/core/Drawer'\nimport Hidden from '@material-ui/core/Hidden'\nimport IconButton from '@material-ui/core/IconButton'\nimport MenuIcon from '@material-ui/icons/Menu'\nimport Toolbar from '@material-ui/core/Toolbar'\nimport Typography from '@material-ui/core/Typography'\nimport { makeStyles, useTheme } from '@material-ui/core/styles'\n\nconst drawerWidth = 240\n\nconst customStyleColor = {\n  background: 'linear-gradient(90deg, #a6e2ff 30%, #ccefff 90%)',\n  height: 47,\n  boxShadow: '0px 0px'  // Removes App bar 3D effect\n}\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n  },\n  drawer: {\n    [theme.breakpoints.up('sm')]: {\n      width: drawerWidth,\n      flexShrink: 0,\n    },\n  },\n  appBar: {\n    zIndex: theme.zIndex.drawer + 1,  // Keeps menu below App bar.\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n    [theme.breakpoints.up('sm')]: {\n      display: 'none',\n    },\n  },\n  listItem: {\n    paddingTop: '3px',\n    paddingBottom: '3px',\n  },\n  // necessary for content to be below app bar\n  toolbar: theme.mixins.toolbar,\n  drawerPaper: {\n    width: drawerWidth,\n    backgroundColor: '#fafafa',  // Menu color\n    border: '0px'\n  },\n  content: {\n    flexGrow: 1,\n    padding: theme.spacing(3),\n  },\n}))\n\nfunction MainStructure(props) {\n  // Material UI:\n  const windowForMUI = props.window\n  const container = windowForMUI !== undefined ? () => windowForMUI().document.body : undefined\n  const classes = useStyles()\n  const theme = useTheme()\n  const [mobileOpen, setMobileOpen] = React.useState(false)\n  const handleDrawerToggle = () => {\n    setMobileOpen(!mobileOpen)\n  }\n\n  const categories = useSelector(state => state.categories)\n\n  // For routing:\n  const idInMatchObject = useRouteMatch('/kategoriat/:id')\n  const idExtracted = idInMatchObject ? Number(idInMatchObject.params.id) : null\n\n  // First main category:\n  let firstMainCategory = categories.find(category => category.category_id == null)\n  if(firstMainCategory == null) firstMainCategory = { id: '' }  // because of the initialization delay.\n\n\n  // MAIN COMPONENT:\n\n  return (\n    <div className={classes.root}>\n      <CssBaseline />\n      <AppBar position=\"fixed\" className={classes.appBar} style={customStyleColor}>\n        <Toolbar >\n          <IconButton\n            color=\"inherit\"\n            aria-label=\"open drawer\"\n            edge=\"start\"\n            onClick={handleDrawerToggle}\n            className={classes.menuButton}\n          >\n            <MenuIcon />\n          </IconButton>\n          <Typography variant=\"h6\" noWrap>\n            Linnakauppa\n          </Typography>\n        </Toolbar>\n      </AppBar>\n      <nav className={classes.drawer} aria-label=\"mailbox folders\">\n        {/* The implementation can be swapped with js to avoid SEO duplication of links. */}\n        <Hidden smUp implementation=\"css\">\n          <Drawer\n            container={container}\n            variant=\"temporary\"\n            anchor={theme.direction === 'rtl' ? 'right' : 'left'}\n            open={mobileOpen}\n            onClose={handleDrawerToggle}\n            classes={{\n              paper: classes.drawerPaper,\n            }}\n            ModalProps={{\n              keepMounted: true, // Better open performance on mobile.\n            }}\n          >\n            <Menu />\n          </Drawer>\n        </Hidden>\n        <Hidden xsDown implementation=\"css\">\n          <Drawer\n            classes={{\n              paper: classes.drawerPaper,\n            }}\n            variant=\"permanent\"\n            open\n          >\n            <Menu />\n          </Drawer>\n        </Hidden>\n      </nav>\n      <main className={classes.content}>\n        <div className={classes.toolbar} />\n\n\n        <Switch>\n          <Route path=\"/kategoriat/:id\">\n            <CategoryPage id={idExtracted} />\n          </Route>\n          <Route path=\"/omattilaukset\">\n            <MyOrdersPage />\n          </Route>\n          <Route path=\"/ostoskori\">\n            <MyCartPage />\n          </Route>\n          <Route path=\"/tilaukset\">\n            <AdminOrdersPage />\n          </Route>\n          <Route path=\"/uusikategoria\">\n            <CategoryAdditionForm parentCategoryIdForNewCategory={null} />\n          </Route>\n          <Route path=\"/asiakkaat\">\n            <CustomersPage />\n          </Route>\n          <Route path=\"/kirjautuminen\">\n            <LoginPage />\n          </Route>\n          <Route path=\"/rekisteroityminen\">\n            <RegisterPage />\n          </Route>\n          <Route path=\"/\">\n            <Redirect to={'/kategoriat/' + firstMainCategory.id} />\n          </Route>\n        </Switch>\n\n        <Notification />\n      </main>\n    </div>\n  )\n}\n\nexport default MainStructure\n","import categoryService from '../services/categories'\n\nconst reducer = (state = [], action) => {\n  switch (action.type) {\n  case 'INIT_CATEGORIES':\n    return action.data\n  case 'ADD_NEW_CATEGORY':\n    return state.concat(action.data)\n  case 'DELETE_CATEGORY':\n    return state.filter(cetegory => cetegory.id !== action.data)\n  case 'REPLACE_CATEGORY':\n    return state.filter(cetegory => cetegory.id !== action.data.id).concat(action.data)\n  default: return state\n  }\n}\n\n// Action creators:\n\nexport const initializeCategories = () => {\n  return async dispatch => {\n    const categories = await categoryService.getAll()\n\n    dispatch({\n      type: 'INIT_CATEGORIES',\n      data: categories\n    })\n  }\n}\n\nexport default reducer","import React, { useEffect } from 'react'\nimport { useDispatch } from 'react-redux'\nimport MainStructure from './components/MainStructure'\nimport { initializeCategories } from './reducers/categoryReducer'\nimport { initializeAvailableProducts } from './reducers/productReducer'\nimport { initializeAllProducts } from './reducers/productReducer'\nimport { BrowserRouter as Router } from 'react-router-dom'\n\n\nconst App = () => {\n  const dispatch = useDispatch()\n\n  useEffect(() => dispatch(initializeCategories()), [dispatch])\n\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('genericStoreUser')\n\n    let user\n    if (loggedUserJSON) {\n      user = JSON.parse(loggedUserJSON)\n\n      dispatch({\n        type: 'ADD_LOGGED_IN',\n        data: user\n      })\n    }\n\n    const cartJSON = window.localStorage.getItem('cart')\n\n    let cart\n    if (cartJSON) {\n      cart = JSON.parse(cartJSON)\n      dispatch({\n        type: 'ADD_TO_CART',\n        data: cart\n      })\n    }\n\n    dispatch(initializeCategories())\n    if (user != null && user.admin != null) dispatch(initializeAllProducts(user.token))\n    else dispatch(initializeAvailableProducts())\n  }, [dispatch])\n\n\n  return (\n    <div>\n      <Router>\n        <MainStructure />\n      </Router>\n    </div>\n  )\n}\n\nexport default App","import { createStore, combineReducers, applyMiddleware } from 'redux'\nimport thunk from 'redux-thunk'\nimport categoryReducer from './reducers/categoryReducer'\nimport productReducer from './reducers/productReducer'\nimport orderReducer from './reducers/orderReducer'\nimport customerReducer from './reducers/customerReducer'\nimport notificationReducer from './reducers/notificationReducer'\n\nconst reducer = combineReducers({ categories: categoryReducer, products: productReducer, orders: orderReducer, customers: customerReducer, notification: notificationReducer })\n\nconst store = createStore(reducer, applyMiddleware(thunk))\n\nexport default store","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { Provider } from 'react-redux'\nimport App from './App'\nimport store from './store'\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n)"],"sourceRoot":""}